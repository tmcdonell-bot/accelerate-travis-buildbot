<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| General purpose utilities

    The names in this module clash heavily with the Haskell Prelude, so I
    recommend the following import scheme:

&gt; import Pipes
&gt; import qualified Pipes.Prelude as P  -- or use any other qualifier you prefer

    Note that 'String'-based 'IO' is inefficient.  The 'String'-based utilities
    in this module exist only for simple demonstrations without incurring a
    dependency on the @text@ package.

    Also, 'stdinLn' and 'stdoutLn' remove and add newlines, respectively.  This
    behavior is intended to simplify examples.  The corresponding @stdin@ and
    @stdout@ utilities from @pipes-bytestring@ and @pipes-text@ preserve
    newlines.
-}</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes, Trustworthy #-}</span><span>
</span><a name="line-20"></a><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-unused-do-bind #-}</span><span>
</span><a name="line-21"></a><span>
</span><a name="line-22"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-23"></a><span>    </span><span class="hs-comment">-- * Producers</span><span>
</span><a name="line-24"></a><span>    </span><span class="hs-comment">-- $producers</span><span>
</span><a name="line-25"></a><span>      </span><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier hs-var">stdinLn</span></a><span>
</span><a name="line-26"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#readLn"><span class="hs-identifier hs-var">readLn</span></a><span>
</span><a name="line-27"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier hs-var">fromHandle</span></a><span>
</span><a name="line-28"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#repeatM"><span class="hs-identifier hs-var">repeatM</span></a><span>
</span><a name="line-29"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#replicateM"><span class="hs-identifier hs-var">replicateM</span></a><span>
</span><a name="line-30"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#unfoldr"><span class="hs-identifier hs-var">unfoldr</span></a><span>
</span><a name="line-31"></a><span>
</span><a name="line-32"></a><span>    </span><span class="hs-comment">-- * Consumers</span><span>
</span><a name="line-33"></a><span>    </span><span class="hs-comment">-- $consumers</span><span>
</span><a name="line-34"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#stdoutLn"><span class="hs-identifier hs-var">stdoutLn</span></a><span>
</span><a name="line-35"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#stdoutLn%27"><span class="hs-identifier hs-var">stdoutLn'</span></a><span>
</span><a name="line-36"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a><span>
</span><a name="line-37"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#print"><span class="hs-identifier hs-var">print</span></a><span>
</span><a name="line-38"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toHandle"><span class="hs-identifier hs-var">toHandle</span></a><span>
</span><a name="line-39"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#drain"><span class="hs-identifier hs-var">drain</span></a><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span>    </span><span class="hs-comment">-- * Pipes</span><span>
</span><a name="line-42"></a><span>    </span><span class="hs-comment">-- $pipes</span><span>
</span><a name="line-43"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#map"><span class="hs-identifier hs-var">map</span></a><span>
</span><a name="line-44"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span>
</span><a name="line-45"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#sequence"><span class="hs-identifier hs-var">sequence</span></a><span>
</span><a name="line-46"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#mapFoldable"><span class="hs-identifier hs-var">mapFoldable</span></a><span>
</span><a name="line-47"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span>
</span><a name="line-48"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#filterM"><span class="hs-identifier hs-var">filterM</span></a><span>
</span><a name="line-49"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#take"><span class="hs-identifier hs-var">take</span></a><span>
</span><a name="line-50"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#takeWhile"><span class="hs-identifier hs-var">takeWhile</span></a><span>
</span><a name="line-51"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#takeWhile%27"><span class="hs-identifier hs-var">takeWhile'</span></a><span>
</span><a name="line-52"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#drop"><span class="hs-identifier hs-var">drop</span></a><span>
</span><a name="line-53"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#dropWhile"><span class="hs-identifier hs-var">dropWhile</span></a><span>
</span><a name="line-54"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#concat"><span class="hs-identifier hs-var">concat</span></a><span>
</span><a name="line-55"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#elemIndices"><span class="hs-identifier hs-var">elemIndices</span></a><span>
</span><a name="line-56"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span>
</span><a name="line-57"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#scan"><span class="hs-identifier hs-var">scan</span></a><span>
</span><a name="line-58"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#scanM"><span class="hs-identifier hs-var">scanM</span></a><span>
</span><a name="line-59"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#chain"><span class="hs-identifier hs-var">chain</span></a><span>
</span><a name="line-60"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#read"><span class="hs-identifier hs-var">read</span></a><span>
</span><a name="line-61"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#show"><span class="hs-identifier hs-var">show</span></a><span>
</span><a name="line-62"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#seq"><span class="hs-identifier hs-var">seq</span></a><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span>    </span><span class="hs-comment">-- *ListT</span><span>
</span><a name="line-65"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#loop"><span class="hs-identifier hs-var">loop</span></a><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span>    </span><span class="hs-comment">-- * Folds</span><span>
</span><a name="line-68"></a><span>    </span><span class="hs-comment">-- $folds</span><span>
</span><a name="line-69"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span>
</span><a name="line-70"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier hs-var">fold'</span></a><span>
</span><a name="line-71"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#foldM"><span class="hs-identifier hs-var">foldM</span></a><span>
</span><a name="line-72"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#foldM%27"><span class="hs-identifier hs-var">foldM'</span></a><span>
</span><a name="line-73"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span>
</span><a name="line-74"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span>
</span><a name="line-75"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#and"><span class="hs-identifier hs-var">and</span></a><span>
</span><a name="line-76"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#or"><span class="hs-identifier hs-var">or</span></a><span>
</span><a name="line-77"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#elem"><span class="hs-identifier hs-var">elem</span></a><span>
</span><a name="line-78"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#notElem"><span class="hs-identifier hs-var">notElem</span></a><span>
</span><a name="line-79"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#find"><span class="hs-identifier hs-var">find</span></a><span>
</span><a name="line-80"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#findIndex"><span class="hs-identifier hs-var">findIndex</span></a><span>
</span><a name="line-81"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span>
</span><a name="line-82"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#index"><span class="hs-identifier hs-var">index</span></a><span>
</span><a name="line-83"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#last"><span class="hs-identifier hs-var">last</span></a><span>
</span><a name="line-84"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#length"><span class="hs-identifier hs-var">length</span></a><span>
</span><a name="line-85"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#maximum"><span class="hs-identifier hs-var">maximum</span></a><span>
</span><a name="line-86"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#minimum"><span class="hs-identifier hs-var">minimum</span></a><span>
</span><a name="line-87"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span>
</span><a name="line-88"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#sum"><span class="hs-identifier hs-var">sum</span></a><span>
</span><a name="line-89"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#product"><span class="hs-identifier hs-var">product</span></a><span>
</span><a name="line-90"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toList"><span class="hs-identifier hs-var">toList</span></a><span>
</span><a name="line-91"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toListM"><span class="hs-identifier hs-var">toListM</span></a><span>
</span><a name="line-92"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#toListM%27"><span class="hs-identifier hs-var">toListM'</span></a><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span>    </span><span class="hs-comment">-- * Zips</span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#zip"><span class="hs-identifier hs-var">zip</span></a><span>
</span><a name="line-96"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span>    </span><span class="hs-comment">-- * Utilities</span><span>
</span><a name="line-99"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#tee"><span class="hs-identifier hs-var">tee</span></a><span>
</span><a name="line-100"></a><span>    </span><span class="hs-special">,</span><span> </span><a href="Pipes.Prelude.html#generalize"><span class="hs-identifier hs-var">generalize</span></a><span>
</span><a name="line-101"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">throwIO</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">try</span><span class="hs-special">)</span><span>
</span><a name="line-104"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">liftM</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">when</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">unless</span><span class="hs-special">)</span><span>
</span><a name="line-105"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Trans</span><span class="hs-operator">.</span><span class="hs-identifier">State</span><span class="hs-operator">.</span><span class="hs-identifier">Strict</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">get</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">put</span><span class="hs-special">)</span><span>
</span><a name="line-106"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Functor</span><span class="hs-operator">.</span><span class="hs-identifier">Identity</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Identity</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">runIdentity</span><span class="hs-special">)</span><span>
</span><a name="line-107"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Foreign</span><span class="hs-operator">.</span><span class="hs-identifier">C</span><span class="hs-operator">.</span><span class="hs-identifier">Error</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Errno</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Errno</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">ePIPE</span><span class="hs-special">)</span><span>
</span><a name="line-108"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">Exts</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">build</span><span class="hs-special">)</span><span>
</span><a name="line-109"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.html"><span class="hs-identifier">Pipes</span></a><span>
</span><a name="line-110"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Core.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Core</span></a><span>
</span><a name="line-111"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Internal.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Internal</span></a><span>
</span><a name="line-112"></a><span class="hs-keyword">import</span><span> </span><a href="Pipes.Lift.html"><span class="hs-identifier">Pipes</span><span class="hs-operator">.</span><span class="hs-identifier">Lift</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">G</span><span>
</span><a name="line-114"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">IO</span><span>
</span><a name="line-115"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Prelude</span><span>
</span><a name="line-116"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-117"></a><span>      </span><span class="hs-identifier hs-var">all</span><span>
</span><a name="line-118"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">and</span><span>
</span><a name="line-119"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">any</span><span>
</span><a name="line-120"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">concat</span><span>
</span><a name="line-121"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">drop</span><span>
</span><a name="line-122"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">dropWhile</span><span>
</span><a name="line-123"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">elem</span><span>
</span><a name="line-124"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">filter</span><span>
</span><a name="line-125"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">head</span><span>
</span><a name="line-126"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">last</span><span>
</span><a name="line-127"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">length</span><span>
</span><a name="line-128"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">map</span><span>
</span><a name="line-129"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mapM</span><span>
</span><a name="line-130"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mapM_</span><span>
</span><a name="line-131"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">maximum</span><span>
</span><a name="line-132"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">minimum</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">notElem</span><span>
</span><a name="line-134"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">null</span><span>
</span><a name="line-135"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">or</span><span>
</span><a name="line-136"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">print</span><span>
</span><a name="line-137"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">product</span><span>
</span><a name="line-138"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">read</span><span>
</span><a name="line-139"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">readLn</span><span>
</span><a name="line-140"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">sequence</span><span>
</span><a name="line-141"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">show</span><span>
</span><a name="line-142"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">seq</span><span>
</span><a name="line-143"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">sum</span><span>
</span><a name="line-144"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">take</span><span>
</span><a name="line-145"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">takeWhile</span><span>
</span><a name="line-146"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">zip</span><span>
</span><a name="line-147"></a><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">zipWith</span><span>
</span><a name="line-148"></a><span>    </span><span class="hs-special">)</span><span>
</span><a name="line-149"></a><span>
</span><a name="line-150"></a><span class="hs-comment">{- $producers
    Use 'for' loops to iterate over 'Producer's whenever you want to perform the
    same action for every element:

&gt; -- Echo all lines from standard input to standard output
&gt; runEffect $ for P.stdinLn $ \str -&gt; do
&gt;     lift $ putStrLn str

    ... or more concisely:

&gt;&gt;&gt; runEffect $ for P.stdinLn (lift . putStrLn)
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><span class="hs-comment">{-| Read 'String's from 'IO.stdin' using 'getLine'

    Terminates on end of input
-}</span><span>
</span><a name="line-173"></a><span class="hs-identifier">stdinLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072286"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072286"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-174"></a><a name="stdinLn"><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier">stdinLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier hs-var">fromHandle</span></a><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">stdin</span><span>
</span><a name="line-175"></a><span class="hs-pragma">{-# INLINABLE stdinLn #-}</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span class="hs-comment">-- | 'read' values from 'IO.stdin', ignoring failed parses</span><span>
</span><a name="line-178"></a><span class="hs-identifier">readLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072284"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Read</span><span> </span><a href="#local-6989586621679072285"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072285"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072284"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><a name="readLn"><a href="Pipes.Prelude.html#readLn"><span class="hs-identifier">readLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#stdinLn"><span class="hs-identifier hs-var">stdinLn</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#read"><span class="hs-identifier hs-var">read</span></a><span>
</span><a name="line-180"></a><span class="hs-pragma">{-# INLINABLE readLn #-}</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-comment">{-| Read 'String's from a 'IO.Handle' using 'IO.hGetLine'

    Terminates on end of input
-}</span><span>
</span><a name="line-186"></a><span class="hs-identifier">fromHandle</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072283"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Handle</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072283"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-187"></a><a name="fromHandle"><a href="Pipes.Prelude.html#fromHandle"><span class="hs-identifier">fromHandle</span></a></a><span> </span><a name="local-6989586621679072383"><a href="#local-6989586621679072383"><span class="hs-identifier">h</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679072384"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-188"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-189"></a><span>    </span><a name="local-6989586621679072384"><a href="#local-6989586621679072384"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-190"></a><span>        </span><a name="local-6989586621679072659"><a href="#local-6989586621679072659"><span class="hs-identifier">eof</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hIsEOF</span><span> </span><a href="#local-6989586621679072383"><span class="hs-identifier hs-var">h</span></a><span>
</span><a name="line-191"></a><span>        </span><span class="hs-identifier hs-var">unless</span><span> </span><a href="#local-6989586621679072659"><span class="hs-identifier hs-var">eof</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-192"></a><span>            </span><a name="local-6989586621679072804"><a href="#local-6989586621679072804"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hGetLine</span><span> </span><a href="#local-6989586621679072383"><span class="hs-identifier hs-var">h</span></a><span>
</span><a name="line-193"></a><span>            </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679072804"><span class="hs-identifier hs-var">str</span></a><span>
</span><a name="line-194"></a><span>            </span><a href="#local-6989586621679072384"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-195"></a><span class="hs-pragma">{-# INLINABLE fromHandle #-}</span><span>
</span><a name="line-196"></a><span>
</span><a name="line-197"></a><span class="hs-comment">-- | Repeat a monadic action indefinitely, 'yield'ing each result</span><span>
</span><a name="line-198"></a><span class="hs-identifier">repeatM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072280"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679072280"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072281"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072281"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072280"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072282"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-199"></a><a name="repeatM"><a href="Pipes.Prelude.html#repeatM"><span class="hs-identifier">repeatM</span></a></a><span> </span><a name="local-6989586621679072805"><a href="#local-6989586621679072805"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679072805"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Pipes.html#%3E~"><span class="hs-operator hs-var">&gt;~</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-200"></a><span class="hs-pragma">{-# INLINABLE [1] repeatM #-}</span><span>
</span><a name="line-201"></a><span>
</span><a name="line-202"></a><span class="hs-pragma">{-# RULES
  &quot;repeatM m &gt;-&gt; p&quot; forall m p . repeatM m &gt;-&gt; p = lift m &gt;~ p
  #-}</span><span>
</span><a name="line-205"></a><span>
</span><a name="line-206"></a><span class="hs-comment">{-| Repeat a monadic action a fixed number of times, 'yield'ing each result

&gt; replicateM  0      x = return ()
&gt;
&gt; replicateM (m + n) x = replicateM m x &gt;&gt; replicateM n x  -- 0 &lt;= {m,n}
-}</span><span>
</span><a name="line-212"></a><span class="hs-identifier">replicateM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072278"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072278"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072279"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679072279"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072278"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-213"></a><a name="replicateM"><a href="Pipes.Prelude.html#replicateM"><span class="hs-identifier">replicateM</span></a></a><span> </span><a name="local-6989586621679072806"><a href="#local-6989586621679072806"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679072807"><a href="#local-6989586621679072807"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679072807"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="Pipes.html#%3E~"><span class="hs-operator hs-var">&gt;~</span></a><span> </span><a href="Pipes.Prelude.html#take"><span class="hs-identifier hs-var">take</span></a><span> </span><a href="#local-6989586621679072806"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-214"></a><span class="hs-pragma">{-# INLINABLE replicateM #-}</span><span>
</span><a name="line-215"></a><span>
</span><a name="line-216"></a><span class="hs-comment">{- $consumers
    Feed a 'Consumer' the same value repeatedly using ('&gt;~'):

&gt;&gt;&gt; runEffect $ lift getLine &gt;~ P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
...

-}</span><span>
</span><a name="line-227"></a><span>
</span><a name="line-228"></a><span class="hs-comment">{-| Write 'String's to 'IO.stdout' using 'putStrLn'

    Unlike 'toHandle', 'stdoutLn' gracefully terminates on a broken output pipe
-}</span><span>
</span><a name="line-232"></a><span class="hs-identifier">stdoutLn</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072277"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072277"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-233"></a><a name="stdoutLn"><a href="Pipes.Prelude.html#stdoutLn"><span class="hs-identifier">stdoutLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679072808"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-234"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-235"></a><span>    </span><a name="local-6989586621679072808"><a href="#local-6989586621679072808"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-236"></a><span>        </span><a name="local-6989586621679072809"><a href="#local-6989586621679072809"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-237"></a><span>        </span><a name="local-6989586621679073163"><a href="#local-6989586621679073163"><span class="hs-identifier">x</span></a></a><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">try</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">putStrLn</span><span> </span><a href="#local-6989586621679072809"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span>
</span><a name="line-238"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073163"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-239"></a><span>           </span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">G</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">IOError</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">G</span><span class="hs-operator">.</span><span class="hs-identifier">ioe_type</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">G</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">ResourceVanished</span><span>
</span><a name="line-240"></a><span>                           </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">G</span><span class="hs-operator">.</span><span class="hs-identifier">ioe_errno</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073164"><a href="#local-6989586621679073164"><span class="hs-identifier">ioe</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-241"></a><span>                </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Errno</span><span> </span><a href="#local-6989586621679073164"><span class="hs-identifier hs-var">ioe</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">ePIPE</span><span>
</span><a name="line-242"></a><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-243"></a><span>           </span><span class="hs-identifier hs-var">Left</span><span>  </span><a name="local-6989586621679073165"><a href="#local-6989586621679073165"><span class="hs-identifier">e</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">throwIO</span><span> </span><a href="#local-6989586621679073165"><span class="hs-identifier hs-var">e</span></a><span class="hs-special">)</span><span>
</span><a name="line-244"></a><span>           </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072808"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-245"></a><span class="hs-pragma">{-# INLINABLE stdoutLn #-}</span><span>
</span><a name="line-246"></a><span>
</span><a name="line-247"></a><span class="hs-comment">{-| Write 'String's to 'IO.stdout' using 'putStrLn'

    This does not handle a broken output pipe, but has a polymorphic return
    value
-}</span><span>
</span><a name="line-252"></a><span class="hs-identifier">stdoutLn'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072275"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679072275"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072276"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-253"></a><a name="stdoutLn%27"><a href="Pipes.Prelude.html#stdoutLn%27"><span class="hs-identifier">stdoutLn'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073297"><a href="#local-6989586621679073297"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">putStrLn</span><span> </span><a href="#local-6989586621679073297"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-254"></a><span class="hs-pragma">{-# INLINABLE [1] stdoutLn' #-}</span><span>
</span><a name="line-255"></a><span>
</span><a name="line-256"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; stdoutLn'&quot; forall p .
        p &gt;-&gt; stdoutLn' = for p (\str -&gt; liftIO (putStrLn str))
  #-}</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span class="hs-comment">-- | Consume all values using a monadic function</span><span>
</span><a name="line-262"></a><span class="hs-identifier">mapM_</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679072272"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679072273"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679072272"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679072273"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072272"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072274"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-263"></a><a name="mapM_"><a href="Pipes.Prelude.html#mapM_"><span class="hs-identifier">mapM_</span></a></a><span> </span><a name="local-6989586621679073298"><a href="#local-6989586621679073298"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073299"><a href="#local-6989586621679073299"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073298"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073299"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-264"></a><span class="hs-pragma">{-# INLINABLE [1] mapM_ #-}</span><span>
</span><a name="line-265"></a><span>
</span><a name="line-266"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapM_ f&quot; forall p f .
        p &gt;-&gt; mapM_ f = for p (\a -&gt; lift (f a))
  #-}</span><span>
</span><a name="line-270"></a><span>
</span><a name="line-271"></a><span class="hs-comment">-- | 'print' values to 'IO.stdout'</span><span>
</span><a name="line-272"></a><span class="hs-identifier">print</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679072269"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679072270"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679072270"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679072269"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679072271"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-273"></a><a name="print"><a href="Pipes.Prelude.html#print"><span class="hs-identifier">print</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073300"><a href="#local-6989586621679073300"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Prelude</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">print</span><span> </span><a href="#local-6989586621679073300"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-274"></a><span class="hs-pragma">{-# INLINABLE [1] print #-}</span><span>
</span><a name="line-275"></a><span>
</span><a name="line-276"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; print&quot; forall p .
        p &gt;-&gt; print = for p (\a -&gt; liftIO (Prelude.print a))
  #-}</span><span>
</span><a name="line-280"></a><span>
</span><a name="line-281"></a><span class="hs-comment">-- | Write 'String's to a 'IO.Handle' using 'IO.hPutStrLn'</span><span>
</span><a name="line-282"></a><span class="hs-identifier">toHandle</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">MonadIO</span><span> </span><a href="#local-6989586621679071761"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Handle</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679071761"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071762"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-283"></a><a name="toHandle"><a href="Pipes.Prelude.html#toHandle"><span class="hs-identifier">toHandle</span></a></a><span> </span><a name="local-6989586621679073301"><a href="#local-6989586621679073301"><span class="hs-identifier">handle</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073302"><a href="#local-6989586621679073302"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">liftIO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IO</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">hPutStrLn</span><span> </span><a href="#local-6989586621679073301"><span class="hs-identifier hs-var">handle</span></a><span> </span><a href="#local-6989586621679073302"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-284"></a><span class="hs-pragma">{-# INLINABLE [1] toHandle #-}</span><span>
</span><a name="line-285"></a><span>
</span><a name="line-286"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; toHandle handle&quot; forall p handle .
        p &gt;-&gt; toHandle handle = for p (\str -&gt; liftIO (IO.hPutStrLn handle str))
  #-}</span><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span class="hs-comment">-- | 'discard' all incoming values</span><span>
</span><a name="line-292"></a><span class="hs-identifier">drain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071758"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer%27"><span class="hs-identifier hs-type">Consumer'</span></a><span> </span><a href="#local-6989586621679071759"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071758"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071760"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-293"></a><a name="drain"><a href="Pipes.Prelude.html#drain"><span class="hs-identifier">drain</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><a href="Pipes.html#discard"><span class="hs-identifier hs-var">discard</span></a><span>
</span><a name="line-294"></a><span class="hs-pragma">{-# INLINABLE [1] drain #-}</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; drain&quot; forall p .
        p &gt;-&gt; drain = for p discard
  #-}</span><span>
</span><a name="line-300"></a><span>
</span><a name="line-301"></a><span class="hs-comment">{- $pipes
    Use ('&gt;-&gt;') to connect 'Producer's, 'Pipe's, and 'Consumer's:

&gt;&gt;&gt; runEffect $ P.stdinLn &gt;-&gt; P.takeWhile (/= &quot;quit&quot;) &gt;-&gt; P.stdoutLn
Test&lt;Enter&gt;
Test
ABC&lt;Enter&gt;
ABC
quit&lt;Enter&gt;
&gt;&gt;&gt;

-}</span><span>
</span><a name="line-313"></a><span>
</span><a name="line-314"></a><span class="hs-comment">{-| Apply a function to all values flowing downstream

&gt; map id = cat
&gt;
&gt; map (g . f) = map f &gt;-&gt; map g
-}</span><span>
</span><a name="line-320"></a><span class="hs-identifier">map</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071756"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071755"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071756"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071754"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071757"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-321"></a><a name="map"><a href="Pipes.Prelude.html#map"><span class="hs-identifier">map</span></a></a><span> </span><a name="local-6989586621679073303"><a href="#local-6989586621679073303"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073304"><a href="#local-6989586621679073304"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073303"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073304"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-322"></a><span class="hs-pragma">{-# INLINABLE [1] map #-}</span><span>
</span><a name="line-323"></a><span>
</span><a name="line-324"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; map f&quot; forall p f . p &gt;-&gt; map f = for p (\a -&gt; yield (f a))

  ; &quot;map f &gt;-&gt; p&quot; forall p f . map f &gt;-&gt; p = (do
        a &lt;- await
        return (f a) ) &gt;~ p
  #-}</span><span>
</span><a name="line-331"></a><span>
</span><a name="line-332"></a><span class="hs-comment">{-| Apply a monadic function to all values flowing downstream

&gt; mapM return = cat
&gt;
&gt; mapM (f &gt;=&gt; g) = mapM f &gt;-&gt; mapM g
-}</span><span>
</span><a name="line-338"></a><span class="hs-identifier">mapM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071750"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071751"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071750"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071752"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071751"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071752"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071750"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071753"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-339"></a><a name="mapM"><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier">mapM</span></a></a><span> </span><a name="local-6989586621679073305"><a href="#local-6989586621679073305"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073306"><a href="#local-6989586621679073306"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-340"></a><span>    </span><a name="local-6989586621679073307"><a href="#local-6989586621679073307"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073305"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073306"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-341"></a><span>    </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073307"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-342"></a><span class="hs-pragma">{-# INLINABLE [1] mapM #-}</span><span>
</span><a name="line-343"></a><span>
</span><a name="line-344"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapM f&quot; forall p f . p &gt;-&gt; mapM f = for p (\a -&gt; do
        b &lt;- lift (f a)
        yield b )

  ; &quot;mapM f &gt;-&gt; p&quot; forall p f . mapM f &gt;-&gt; p = (do
        a &lt;- await
        b &lt;- lift (f a)
        return b ) &gt;~ p
  #-}</span><span>
</span><a name="line-354"></a><span>
</span><a name="line-355"></a><span class="hs-comment">-- | Convert a stream of actions to a stream of values</span><span>
</span><a name="line-356"></a><span class="hs-identifier">sequence</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071747"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071747"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071748"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679071748"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071747"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071749"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-357"></a><a name="sequence"><a href="Pipes.Prelude.html#sequence"><span class="hs-identifier">sequence</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#mapM"><span class="hs-identifier hs-var">mapM</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-358"></a><span class="hs-pragma">{-# INLINABLE sequence #-}</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-comment">{- | Apply a function to all values flowing downstream, and
     forward each element of the result.
-}</span><span>
</span><a name="line-363"></a><span class="hs-identifier">mapFoldable</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071742"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679071743"><span class="hs-identifier hs-type">t</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071744"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071743"><span class="hs-identifier hs-type">t</span></a><span> </span><a href="#local-6989586621679071745"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071744"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071745"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071742"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071746"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-364"></a><a name="mapFoldable"><a href="Pipes.Prelude.html#mapFoldable"><span class="hs-identifier">mapFoldable</span></a></a><span> </span><a name="local-6989586621679073308"><a href="#local-6989586621679073308"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073309"><a href="#local-6989586621679073309"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#each"><span class="hs-identifier hs-var">each</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073308"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073309"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-365"></a><span class="hs-pragma">{-# INLINABLE [1] mapFoldable #-}</span><span>
</span><a name="line-366"></a><span>
</span><a name="line-367"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; mapFoldable f&quot; forall p f .
        p &gt;-&gt; mapFoldable f = for p (\a -&gt; each (f a))
  #-}</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span class="hs-comment">{-| @(filter predicate)@ only forwards values that satisfy the predicate.

&gt; filter (pure True) = cat
&gt;
&gt; filter (liftA2 (&amp;&amp;) p1 p2) = filter p1 &gt;-&gt; filter p2
-}</span><span>
</span><a name="line-378"></a><span class="hs-identifier">filter</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071739"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071740"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071740"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071740"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071739"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071741"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-379"></a><a name="filter"><a href="Pipes.Prelude.html#filter"><span class="hs-identifier">filter</span></a></a><span> </span><a name="local-6989586621679073310"><a href="#local-6989586621679073310"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073311"><a href="#local-6989586621679073311"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073310"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073311"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073311"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-380"></a><span class="hs-pragma">{-# INLINABLE [1] filter #-}</span><span>
</span><a name="line-381"></a><span>
</span><a name="line-382"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; filter predicate&quot; forall p predicate.
        p &gt;-&gt; filter predicate = for p (\a -&gt; when (predicate a) (yield a))
  #-}</span><span>
</span><a name="line-386"></a><span>
</span><a name="line-387"></a><span class="hs-comment">{-| @(filterM predicate)@ only forwards values that satisfy the monadic
    predicate

&gt; filterM (pure (pure True)) = cat
&gt;
&gt; filterM (liftA2 (liftA2 (&amp;&amp;)) p1 p2) = filterM p1 &gt;-&gt; filterM p2
-}</span><span>
</span><a name="line-394"></a><span class="hs-identifier">filterM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071736"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071737"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071736"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071737"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071737"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071736"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071738"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-395"></a><a name="filterM"><a href="Pipes.Prelude.html#filterM"><span class="hs-identifier">filterM</span></a></a><span> </span><a name="local-6989586621679073312"><a href="#local-6989586621679073312"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073313"><a href="#local-6989586621679073313"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-396"></a><span>    </span><a name="local-6989586621679073314"><a href="#local-6989586621679073314"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073312"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073313"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-397"></a><span>    </span><span class="hs-identifier hs-var">when</span><span> </span><a href="#local-6989586621679073314"><span class="hs-identifier hs-var">b</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073313"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-398"></a><span class="hs-pragma">{-# INLINABLE [1] filterM #-}</span><span>
</span><a name="line-399"></a><span>
</span><a name="line-400"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; filterM predicate&quot; forall p predicate .
        p &gt;-&gt; filterM predicate = for p (\a -&gt; do
            b &lt;- lift (predicate a)
            when b (yield a) )
  #-}</span><span>
</span><a name="line-406"></a><span>
</span><a name="line-407"></a><span class="hs-comment">{-| @(take n)@ only allows @n@ values to pass through

&gt; take 0 = return ()
&gt;
&gt; take (m + n) = take m &gt;&gt; take n

&gt; take &lt;infinity&gt; = cat
&gt;
&gt; take (min m n) = take m &gt;-&gt; take n
-}</span><span>
</span><a name="line-417"></a><span class="hs-identifier">take</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071734"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071735"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071735"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071734"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-418"></a><a name="take"><a href="Pipes.Prelude.html#take"><span class="hs-identifier">take</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073315"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-419"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-420"></a><span>    </span><a name="local-6989586621679073315"><a href="#local-6989586621679073315"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span>
</span><a name="line-421"></a><span>    </span><span class="hs-identifier">go</span><span> </span><a name="local-6989586621679073316"><a href="#local-6989586621679073316"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span>
</span><a name="line-422"></a><span>        </span><a name="local-6989586621679073317"><a href="#local-6989586621679073317"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-423"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073317"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-424"></a><span>        </span><a href="#local-6989586621679073315"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073316"><span class="hs-identifier hs-var">n</span></a><span class="hs-glyph">-</span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><a name="line-425"></a><span class="hs-pragma">{-# INLINABLE take #-}</span><span>
</span><a name="line-426"></a><span>
</span><a name="line-427"></a><span class="hs-comment">{-| @(takeWhile p)@ allows values to pass downstream so long as they satisfy
    the predicate @p@.

&gt; takeWhile (pure True) = cat
&gt;
&gt; takeWhile (liftA2 (&amp;&amp;) p1 p2) = takeWhile p1 &gt;-&gt; takeWhile p2
-}</span><span>
</span><a name="line-434"></a><span class="hs-identifier">takeWhile</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071732"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071733"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071733"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071733"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071732"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-435"></a><a name="takeWhile"><a href="Pipes.Prelude.html#takeWhile"><span class="hs-identifier">takeWhile</span></a></a><span> </span><a name="local-6989586621679073318"><a href="#local-6989586621679073318"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073319"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-436"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-437"></a><span>    </span><a name="local-6989586621679073319"><a href="#local-6989586621679073319"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-438"></a><span>        </span><a name="local-6989586621679073320"><a href="#local-6989586621679073320"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-439"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073318"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073320"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-440"></a><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-441"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073320"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-442"></a><span>                </span><a href="#local-6989586621679073319"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-443"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-444"></a><span class="hs-pragma">{-# INLINABLE takeWhile #-}</span><span>
</span><a name="line-445"></a><span>
</span><a name="line-446"></a><span class="hs-comment">{-| @(takeWhile' p)@ is a version of takeWhile that returns the value failing
    the predicate.

&gt; takeWhile' (pure True) = cat
&gt;
&gt; takeWhile' (liftA2 (&amp;&amp;) p1 p2) = takeWhile' p1 &gt;-&gt; takeWhile' p2
-}</span><span>
</span><a name="line-453"></a><span class="hs-identifier">takeWhile'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071730"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071731"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071731"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071731"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071730"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071731"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-454"></a><a name="takeWhile%27"><a href="Pipes.Prelude.html#takeWhile%27"><span class="hs-identifier">takeWhile'</span></a></a><span> </span><a name="local-6989586621679073321"><a href="#local-6989586621679073321"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073322"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-455"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-456"></a><span>    </span><a name="local-6989586621679073322"><a href="#local-6989586621679073322"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-457"></a><span>        </span><a name="local-6989586621679073323"><a href="#local-6989586621679073323"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-458"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073321"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073323"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-459"></a><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-460"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073323"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-461"></a><span>                </span><a href="#local-6989586621679073322"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-462"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073323"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-463"></a><span class="hs-pragma">{-# INLINABLE takeWhile' #-}</span><span>
</span><a name="line-464"></a><span>
</span><a name="line-465"></a><span class="hs-comment">{-| @(drop n)@ discards @n@ values going downstream

&gt; drop 0 = cat
&gt;
&gt; drop (m + n) = drop m &gt;-&gt; drop n
-}</span><span>
</span><a name="line-471"></a><span class="hs-identifier">drop</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071727"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071728"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071728"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071727"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071729"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-472"></a><a name="drop"><a href="Pipes.Prelude.html#drop"><span class="hs-identifier">drop</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073324"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-473"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-474"></a><span>    </span><a name="local-6989586621679073324"><a href="#local-6989586621679073324"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-475"></a><span>    </span><span class="hs-identifier">go</span><span> </span><a name="local-6989586621679073325"><a href="#local-6989586621679073325"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">do</span><span>
</span><a name="line-476"></a><span>        </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-477"></a><span>        </span><a href="#local-6989586621679073324"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073325"><span class="hs-identifier hs-var">n</span></a><span class="hs-glyph">-</span><span class="hs-number">1</span><span class="hs-special">)</span><span>
</span><a name="line-478"></a><span class="hs-pragma">{-# INLINABLE drop #-}</span><span>
</span><a name="line-479"></a><span>
</span><a name="line-480"></a><span class="hs-comment">{-| @(dropWhile p)@ discards values going downstream until one violates the
    predicate @p@.

&gt; dropWhile (pure False) = cat
&gt;
&gt; dropWhile (liftA2 (||) p1 p2) = dropWhile p1 &gt;-&gt; dropWhile p2
-}</span><span>
</span><a name="line-487"></a><span class="hs-identifier">dropWhile</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071724"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071725"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071725"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071725"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071724"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071726"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-488"></a><a name="dropWhile"><a href="Pipes.Prelude.html#dropWhile"><span class="hs-identifier">dropWhile</span></a></a><span> </span><a name="local-6989586621679073326"><a href="#local-6989586621679073326"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073327"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-489"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-490"></a><span>    </span><a name="local-6989586621679073327"><a href="#local-6989586621679073327"><span class="hs-identifier">go</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-491"></a><span>        </span><a name="local-6989586621679073328"><a href="#local-6989586621679073328"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-492"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073326"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073328"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-493"></a><span>            </span><span class="hs-keyword">then</span><span> </span><a href="#local-6989586621679073327"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-494"></a><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-495"></a><span>                </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073328"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-496"></a><span>                </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span>
</span><a name="line-497"></a><span class="hs-pragma">{-# INLINABLE dropWhile #-}</span><span>
</span><a name="line-498"></a><span>
</span><a name="line-499"></a><span class="hs-comment">-- | Flatten all 'Foldable' elements flowing downstream</span><span>
</span><a name="line-500"></a><span class="hs-identifier">concat</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071720"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Foldable</span><span> </span><a href="#local-6989586621679071721"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071721"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679071722"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679071722"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071720"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071723"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-501"></a><a name="concat"><a href="Pipes.Prelude.html#concat"><span class="hs-identifier">concat</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><a href="Pipes.html#each"><span class="hs-identifier hs-var">each</span></a><span>
</span><a name="line-502"></a><span class="hs-pragma">{-# INLINABLE [1] concat #-}</span><span>
</span><a name="line-503"></a><span>
</span><a name="line-504"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; concat&quot; forall p . p &gt;-&gt; concat = for p each
  #-}</span><span>
</span><a name="line-507"></a><span>
</span><a name="line-508"></a><span class="hs-comment">-- | Outputs the indices of all elements that match the given element</span><span>
</span><a name="line-509"></a><span class="hs-identifier">elemIndices</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071717"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679071718"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679071718"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071718"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><a href="#local-6989586621679071717"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071719"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-510"></a><a name="elemIndices"><a href="Pipes.Prelude.html#elemIndices"><span class="hs-identifier">elemIndices</span></a></a><span> </span><a name="local-6989586621679073329"><a href="#local-6989586621679073329"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073329"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span>
</span><a name="line-511"></a><span class="hs-pragma">{-# INLINABLE elemIndices #-}</span><span>
</span><a name="line-512"></a><span>
</span><a name="line-513"></a><span class="hs-comment">-- | Outputs the indices of all elements that satisfied the predicate</span><span>
</span><a name="line-514"></a><span class="hs-identifier">findIndices</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071714"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071715"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071715"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><a href="#local-6989586621679071714"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071716"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-515"></a><a name="findIndices"><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier">findIndices</span></a></a><span> </span><a name="local-6989586621679073330"><a href="#local-6989586621679073330"><span class="hs-identifier">predicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073331"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-number">0</span><span>
</span><a name="line-516"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-517"></a><span>    </span><a name="local-6989586621679073331"><a href="#local-6989586621679073331"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073332"><a href="#local-6989586621679073332"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-518"></a><span>        </span><a name="local-6989586621679073333"><a href="#local-6989586621679073333"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-519"></a><span>        </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073330"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073333"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073332"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-520"></a><span>        </span><a href="#local-6989586621679073331"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073332"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><span class="hs-number">1</span><span>
</span><a name="line-521"></a><span class="hs-pragma">{-# INLINABLE findIndices #-}</span><span>
</span><a name="line-522"></a><span>
</span><a name="line-523"></a><span class="hs-comment">{-| Strict left scan

&gt; Control.Foldl.purely scan :: Monad m =&gt; Fold a b -&gt; Pipe a b m r
-}</span><span>
</span><a name="line-527"></a><span class="hs-identifier">scan</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071709"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071710"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071711"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071710"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071710"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071710"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071712"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071711"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071712"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071709"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071713"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-528"></a><a name="scan"><a href="Pipes.Prelude.html#scan"><span class="hs-identifier">scan</span></a></a><span> </span><a name="local-6989586621679073334"><a href="#local-6989586621679073334"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073335"><a href="#local-6989586621679073335"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073336"><a href="#local-6989586621679073336"><span class="hs-identifier">done</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073337"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073335"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-529"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-530"></a><span>    </span><a name="local-6989586621679073337"><a href="#local-6989586621679073337"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073338"><a href="#local-6989586621679073338"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-531"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073336"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073338"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-532"></a><span>        </span><a name="local-6989586621679073339"><a href="#local-6989586621679073339"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-533"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679073340"><a href="#local-6989586621679073340"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073334"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073338"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073339"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-534"></a><span>        </span><a href="#local-6989586621679073337"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073340"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-535"></a><span class="hs-pragma">{-# INLINABLE scan #-}</span><span>
</span><a name="line-536"></a><span>
</span><a name="line-537"></a><span class="hs-comment">{-| Strict, monadic left scan

&gt; Control.Foldl.impurely scan :: Monad m =&gt; FoldM a m b -&gt; Pipe a b m r
-}</span><span>
</span><a name="line-541"></a><span class="hs-identifier">scanM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071704"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071705"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071706"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071704"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071705"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071704"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071705"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071705"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071704"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071707"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071706"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071707"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679071704"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071708"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-542"></a><a name="scanM"><a href="Pipes.Prelude.html#scanM"><span class="hs-identifier">scanM</span></a></a><span> </span><a name="local-6989586621679073341"><a href="#local-6989586621679073341"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073342"><a href="#local-6989586621679073342"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073343"><a href="#local-6989586621679073343"><span class="hs-identifier">done</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-543"></a><span>    </span><a name="local-6989586621679073349"><a href="#local-6989586621679073349"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073342"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-544"></a><span>    </span><a href="#local-6989586621679073344"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073349"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-545"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-546"></a><span>    </span><a name="local-6989586621679073344"><a href="#local-6989586621679073344"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073345"><a href="#local-6989586621679073345"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-547"></a><span>        </span><a name="local-6989586621679073346"><a href="#local-6989586621679073346"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073343"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073345"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-548"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073346"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-549"></a><span>        </span><a name="local-6989586621679073347"><a href="#local-6989586621679073347"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-550"></a><span>        </span><a name="local-6989586621679073348"><a href="#local-6989586621679073348"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073341"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073345"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073347"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-551"></a><span>        </span><a href="#local-6989586621679073344"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073348"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-552"></a><span class="hs-pragma">{-# INLINABLE scanM #-}</span><span>
</span><a name="line-553"></a><span>
</span><a name="line-554"></a><span class="hs-comment">{-| Apply an action to all values flowing downstream

&gt; chain (pure (return ())) = cat
&gt;
&gt; chain (liftA2 (&gt;&gt;) m1 m2) = chain m1 &gt;-&gt; chain m2
-}</span><span>
</span><a name="line-560"></a><span class="hs-identifier">chain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679071701"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679071702"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679071701"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679071702"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071702"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679071701"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679071703"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-561"></a><a name="chain"><a href="Pipes.Prelude.html#chain"><span class="hs-identifier">chain</span></a></a><span> </span><a name="local-6989586621679073350"><a href="#local-6989586621679073350"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073351"><a href="#local-6989586621679073351"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-562"></a><span>    </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073350"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073351"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-563"></a><span>    </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073351"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-564"></a><span class="hs-pragma">{-# INLINABLE [1] chain #-}</span><span>
</span><a name="line-565"></a><span>
</span><a name="line-566"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; chain f&quot; forall p f .
        p &gt;-&gt; chain f = for p (\a -&gt; do
            lift (f a)
            yield a )
  ; &quot;chain f &gt;-&gt; p&quot; forall p f .
        chain f &gt;-&gt; p = (do
            a &lt;- await
            lift (f a)
            return a ) &gt;~ p
  #-}</span><span>
</span><a name="line-577"></a><span>
</span><a name="line-578"></a><span class="hs-comment">-- | Parse 'Read'able values, only forwarding the value if the parse succeeds</span><span>
</span><a name="line-579"></a><span class="hs-identifier">read</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070781"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Read</span><span> </span><a href="#local-6989586621679070782"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679070782"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070781"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070783"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-580"></a><a name="read"><a href="Pipes.Prelude.html#read"><span class="hs-identifier">read</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073352"><a href="#local-6989586621679073352"><span class="hs-identifier">str</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">reads</span><span> </span><a href="#local-6989586621679073352"><span class="hs-identifier hs-var">str</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-581"></a><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><a name="local-6989586621679073383"><a href="#local-6989586621679073383"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;&quot;</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073383"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-582"></a><span>    </span><span class="hs-identifier">_</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-583"></a><span class="hs-pragma">{-# INLINABLE [1] read #-}</span><span>
</span><a name="line-584"></a><span>
</span><a name="line-585"></a><span class="hs-pragma">{-# RULES
    &quot;p &gt;-&gt; read&quot; forall p .
        p &gt;-&gt; read = for p (\str -&gt; case (reads str) of
            [(a, &quot;&quot;)] -&gt; yield a
            _         -&gt; return () )
  #-}</span><span>
</span><a name="line-591"></a><span>
</span><a name="line-592"></a><span class="hs-comment">-- | Convert 'Show'able values to 'String's</span><span>
</span><a name="line-593"></a><span class="hs-identifier">show</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070778"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679070779"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070779"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><a href="#local-6989586621679070778"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070780"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-594"></a><a name="show"><a href="Pipes.Prelude.html#show"><span class="hs-identifier">show</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><span class="hs-identifier hs-var">Prelude</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">show</span><span>
</span><a name="line-595"></a><span class="hs-pragma">{-# INLINABLE show #-}</span><span>
</span><a name="line-596"></a><span>
</span><a name="line-597"></a><span class="hs-comment">-- | Evaluate all values flowing downstream to WHNF</span><span>
</span><a name="line-598"></a><span class="hs-identifier">seq</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070775"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070776"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070776"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070775"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070777"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-599"></a><a name="seq"><a href="Pipes.Prelude.html#seq"><span class="hs-identifier">seq</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073384"><a href="#local-6989586621679073384"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073384"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-600"></a><span class="hs-pragma">{-# INLINABLE seq #-}</span><span>
</span><a name="line-601"></a><span>
</span><a name="line-602"></a><span class="hs-comment">{-| Create a `Pipe` from a `ListT` transformation

&gt; loop (k1 &gt;=&gt; k2) = loop k1 &gt;-&gt; loop k2
&gt;
&gt; loop return = cat
-}</span><span>
</span><a name="line-608"></a><span class="hs-identifier">loop</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070771"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070772"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#ListT"><span class="hs-identifier hs-type">ListT</span></a><span> </span><a href="#local-6989586621679070771"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070773"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070772"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070773"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070771"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070774"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-609"></a><a name="loop"><a href="Pipes.Prelude.html#loop"><span class="hs-identifier">loop</span></a></a><span> </span><a name="local-6989586621679073385"><a href="#local-6989586621679073385"><span class="hs-identifier">k</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.html#for"><span class="hs-identifier hs-var">for</span></a><span> </span><a href="Pipes.html#cat"><span class="hs-identifier hs-var">cat</span></a><span> </span><span class="hs-special">(</span><a href="Pipes.html#every"><span class="hs-identifier hs-var">every</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679073385"><span class="hs-identifier hs-var">k</span></a><span class="hs-special">)</span><span>
</span><a name="line-610"></a><span class="hs-pragma">{-# INLINABLE loop #-}</span><span>
</span><a name="line-611"></a><span>
</span><a name="line-612"></a><span class="hs-comment">{- $folds
    Use these to fold the output of a 'Producer'.  Many of these folds will stop
    drawing elements if they can compute their result early, like 'any':

&gt;&gt;&gt; P.any Prelude.null P.stdinLn
Test&lt;Enter&gt;
ABC&lt;Enter&gt;
&lt;Enter&gt;
True
&gt;&gt;&gt;

-}</span><span>
</span><a name="line-624"></a><span>
</span><a name="line-625"></a><span class="hs-comment">{-| Strict fold of the elements of a 'Producer'

&gt; Control.Foldl.purely fold :: Monad m =&gt; Fold a b -&gt; Producer a m () -&gt; m b
-}</span><span>
</span><a name="line-629"></a><span class="hs-identifier">fold</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070767"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070768"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070769"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070768"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070768"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070768"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070770"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070769"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070767"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070767"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070770"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-630"></a><a name="fold"><a href="Pipes.Prelude.html#fold"><span class="hs-identifier">fold</span></a></a><span> </span><a name="local-6989586621679073386"><a href="#local-6989586621679073386"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073387"><a href="#local-6989586621679073387"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073388"><a href="#local-6989586621679073388"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073389"><a href="#local-6989586621679073389"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073390"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073389"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073387"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-631"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-632"></a><span>    </span><a name="local-6989586621679073390"><a href="#local-6989586621679073390"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073391"><a href="#local-6989586621679073391"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073392"><a href="#local-6989586621679073392"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073391"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-633"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073393"><a href="#local-6989586621679073393"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073393"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-634"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073394"><a href="#local-6989586621679073394"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073395"><a href="#local-6989586621679073395"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073390"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073395"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073386"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073392"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073394"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-635"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073396"><a href="#local-6989586621679073396"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073396"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073397"><a href="#local-6989586621679073397"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073390"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073397"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073392"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-636"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073388"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073392"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-637"></a><span class="hs-pragma">{-# INLINABLE fold #-}</span><span>
</span><a name="line-638"></a><span>
</span><a name="line-639"></a><span class="hs-comment">{-| Strict fold of the elements of a 'Producer' that preserves the return value

&gt; Control.Foldl.purely fold' :: Monad m =&gt; Fold a b -&gt; Producer a m r -&gt; m (b, r)
-}</span><span>
</span><a name="line-643"></a><span class="hs-identifier">fold'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070762"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070763"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070764"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070763"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070763"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070763"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070765"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070764"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070762"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070766"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070762"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070765"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070766"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-644"></a><a name="fold%27"><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier">fold'</span></a></a><span> </span><a name="local-6989586621679073398"><a href="#local-6989586621679073398"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073399"><a href="#local-6989586621679073399"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073400"><a href="#local-6989586621679073400"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073401"><a href="#local-6989586621679073401"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073402"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073401"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073399"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-645"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-646"></a><span>    </span><a name="local-6989586621679073402"><a href="#local-6989586621679073402"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073403"><a href="#local-6989586621679073403"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073404"><a href="#local-6989586621679073404"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073403"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-647"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073405"><a href="#local-6989586621679073405"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073405"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-648"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073406"><a href="#local-6989586621679073406"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073407"><a href="#local-6989586621679073407"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073402"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073407"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073398"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073404"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073406"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-649"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073408"><a href="#local-6989586621679073408"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073408"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073409"><a href="#local-6989586621679073409"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073402"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073409"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073404"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-650"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><a name="local-6989586621679073410"><a href="#local-6989586621679073410"><span class="hs-identifier">r</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073400"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073404"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679073410"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-651"></a><span class="hs-pragma">{-# INLINABLE fold' #-}</span><span>
</span><a name="line-652"></a><span>
</span><a name="line-653"></a><span class="hs-comment">{-| Strict, monadic fold of the elements of a 'Producer'

&gt; Control.Foldl.impurely foldM :: Monad m =&gt; FoldM a b -&gt; Producer a m () -&gt; m b
-}</span><span>
</span><a name="line-657"></a><span class="hs-identifier">foldM</span><span>
</span><a name="line-658"></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-659"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070759"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070760"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070759"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070759"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070759"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070761"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070760"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070758"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070761"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-660"></a><a name="foldM"><a href="Pipes.Prelude.html#foldM"><span class="hs-identifier">foldM</span></a></a><span> </span><a name="local-6989586621679073411"><a href="#local-6989586621679073411"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073412"><a href="#local-6989586621679073412"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073413"><a href="#local-6989586621679073413"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073414"><a href="#local-6989586621679073414"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-661"></a><span>    </span><a name="local-6989586621679073424"><a href="#local-6989586621679073424"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073412"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-662"></a><span>    </span><a href="#local-6989586621679073415"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073414"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073424"><span class="hs-identifier hs-var">x0</span></a><span>
</span><a name="line-663"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-664"></a><span>    </span><a name="local-6989586621679073415"><a href="#local-6989586621679073415"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073416"><a href="#local-6989586621679073416"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073417"><a href="#local-6989586621679073417"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073416"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-665"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073418"><a href="#local-6989586621679073418"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073418"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-666"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073419"><a href="#local-6989586621679073419"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073420"><a href="#local-6989586621679073420"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-667"></a><span>            </span><a name="local-6989586621679073421"><a href="#local-6989586621679073421"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073411"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073417"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073419"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-668"></a><span>            </span><a href="#local-6989586621679073415"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073420"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073421"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-669"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073422"><a href="#local-6989586621679073422"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073422"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073423"><a href="#local-6989586621679073423"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073415"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073423"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073417"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-670"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073413"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073417"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-671"></a><span class="hs-pragma">{-# INLINABLE foldM #-}</span><span>
</span><a name="line-672"></a><span>
</span><a name="line-673"></a><span class="hs-comment">{-| Strict, monadic fold of the elements of a 'Producer'

&gt; Control.Foldl.impurely foldM' :: Monad m =&gt; FoldM a b -&gt; Producer a m r -&gt; m (b, r)
-}</span><span>
</span><a name="line-677"></a><span class="hs-identifier">foldM'</span><span>
</span><a name="line-678"></a><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-679"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070754"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070755"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070754"><span class="hs-identifier hs-type">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070754"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070754"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070756"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070755"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070757"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070753"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070756"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070757"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-680"></a><a name="foldM%27"><a href="Pipes.Prelude.html#foldM%27"><span class="hs-identifier">foldM'</span></a></a><span> </span><a name="local-6989586621679073425"><a href="#local-6989586621679073425"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073426"><a href="#local-6989586621679073426"><span class="hs-identifier">begin</span></a></a><span> </span><a name="local-6989586621679073427"><a href="#local-6989586621679073427"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073428"><a href="#local-6989586621679073428"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-681"></a><span>    </span><a name="local-6989586621679073440"><a href="#local-6989586621679073440"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073426"><span class="hs-identifier hs-var">begin</span></a><span>
</span><a name="line-682"></a><span>    </span><a href="#local-6989586621679073429"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073428"><span class="hs-identifier hs-var">p0</span></a><span> </span><a href="#local-6989586621679073440"><span class="hs-identifier hs-var">x0</span></a><span>
</span><a name="line-683"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-684"></a><span>    </span><a name="local-6989586621679073429"><a href="#local-6989586621679073429"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073430"><a href="#local-6989586621679073430"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073431"><a href="#local-6989586621679073431"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073430"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-685"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073432"><a href="#local-6989586621679073432"><span class="hs-identifier">v</span></a></a><span>  </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073432"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-686"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073433"><a href="#local-6989586621679073433"><span class="hs-identifier">a</span></a></a><span>  </span><a name="local-6989586621679073434"><a href="#local-6989586621679073434"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-687"></a><span>            </span><a name="local-6989586621679073435"><a href="#local-6989586621679073435"><span class="hs-identifier">x'</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073425"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073431"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679073433"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-688"></a><span>            </span><a href="#local-6989586621679073429"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073434"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$!</span><span> </span><a href="#local-6989586621679073435"><span class="hs-identifier hs-var">x'</span></a><span>
</span><a name="line-689"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>          </span><a name="local-6989586621679073436"><a href="#local-6989586621679073436"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073436"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679073437"><a href="#local-6989586621679073437"><span class="hs-identifier">p'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073429"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073437"><span class="hs-identifier hs-var">p'</span></a><span> </span><a href="#local-6989586621679073431"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-690"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><a name="local-6989586621679073438"><a href="#local-6989586621679073438"><span class="hs-identifier">r</span></a></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-691"></a><span>            </span><a name="local-6989586621679073439"><a href="#local-6989586621679073439"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073427"><span class="hs-identifier hs-var">done</span></a><span> </span><a href="#local-6989586621679073431"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-692"></a><span>            </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073439"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679073438"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-693"></a><span class="hs-pragma">{-# INLINABLE foldM' #-}</span><span>
</span><a name="line-694"></a><span>
</span><a name="line-695"></a><span class="hs-comment">{-| @(all predicate p)@ determines whether all the elements of @p@ satisfy the
    predicate.
-}</span><span>
</span><a name="line-698"></a><span class="hs-identifier">all</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070751"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070752"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070752"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070751"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070751"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-699"></a><a name="all"><a href="Pipes.Prelude.html#all"><span class="hs-identifier">all</span></a></a><span> </span><a name="local-6989586621679073441"><a href="#local-6989586621679073441"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073442"><a href="#local-6989586621679073442"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679073442"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073443"><a href="#local-6989586621679073443"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073441"><span class="hs-identifier hs-var">predicate</span></a><span> </span><a href="#local-6989586621679073443"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-700"></a><span class="hs-pragma">{-# INLINABLE all #-}</span><span>
</span><a name="line-701"></a><span>
</span><a name="line-702"></a><span class="hs-comment">{-| @(any predicate p)@ determines whether any element of @p@ satisfies the
    predicate.
-}</span><span>
</span><a name="line-705"></a><span class="hs-identifier">any</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070749"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070750"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070750"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070749"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070749"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-706"></a><a name="any"><a href="Pipes.Prelude.html#any"><span class="hs-identifier">any</span></a></a><span> </span><a name="local-6989586621679073444"><a href="#local-6989586621679073444"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073445"><a href="#local-6989586621679073445"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">liftM</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.Prelude.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073445"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><a href="#local-6989586621679073444"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-707"></a><span class="hs-pragma">{-# INLINABLE any #-}</span><span>
</span><a name="line-708"></a><span>
</span><a name="line-709"></a><span class="hs-comment">-- | Determines whether all elements are 'True'</span><span>
</span><a name="line-710"></a><span class="hs-identifier">and</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070748"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><a href="#local-6989586621679070748"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070748"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-711"></a><a name="and"><a href="Pipes.Prelude.html#and"><span class="hs-identifier">and</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-712"></a><span class="hs-pragma">{-# INLINABLE and #-}</span><span>
</span><a name="line-713"></a><span>
</span><a name="line-714"></a><span class="hs-comment">-- | Determines whether any element is 'True'</span><span>
</span><a name="line-715"></a><span class="hs-identifier">or</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070747"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><a href="#local-6989586621679070747"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070747"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-716"></a><a name="or"><a href="Pipes.Prelude.html#or"><span class="hs-identifier">or</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-717"></a><span class="hs-pragma">{-# INLINABLE or #-}</span><span>
</span><a name="line-718"></a><span>
</span><a name="line-719"></a><span class="hs-comment">{-| @(elem a p)@ returns 'True' if @p@ has an element equal to @a@, 'False'
    otherwise
-}</span><span>
</span><a name="line-722"></a><span class="hs-identifier">elem</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070745"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679070746"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679070746"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070746"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070745"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070745"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-723"></a><a name="elem"><a href="Pipes.Prelude.html#elem"><span class="hs-identifier">elem</span></a></a><span> </span><a name="local-6989586621679073446"><a href="#local-6989586621679073446"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#any"><span class="hs-identifier hs-var">any</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073446"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span>
</span><a name="line-724"></a><span class="hs-pragma">{-# INLINABLE elem #-}</span><span>
</span><a name="line-725"></a><span>
</span><a name="line-726"></a><span class="hs-comment">{-| @(notElem a)@ returns 'False' if @p@ has an element equal to @a@, 'True'
    otherwise
-}</span><span>
</span><a name="line-729"></a><span class="hs-identifier">notElem</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070743"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679070744"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679070744"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070744"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070743"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070743"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-730"></a><a name="notElem"><a href="Pipes.Prelude.html#notElem"><span class="hs-identifier">notElem</span></a></a><span> </span><a name="local-6989586621679073447"><a href="#local-6989586621679073447"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#all"><span class="hs-identifier hs-var">all</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073447"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">/=</span><span class="hs-special">)</span><span>
</span><a name="line-731"></a><span class="hs-pragma">{-# INLINABLE notElem #-}</span><span>
</span><a name="line-732"></a><span>
</span><a name="line-733"></a><span class="hs-comment">-- | Find the first element of a 'Producer' that satisfies the predicate</span><span>
</span><a name="line-734"></a><span class="hs-identifier">find</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070741"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070742"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070742"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070741"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070741"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070742"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-735"></a><a name="find"><a href="Pipes.Prelude.html#find"><span class="hs-identifier">find</span></a></a><span> </span><a name="local-6989586621679073448"><a href="#local-6989586621679073448"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073449"><a href="#local-6989586621679073449"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073449"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#filter"><span class="hs-identifier hs-var">filter</span></a><span> </span><a href="#local-6989586621679073448"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-736"></a><span class="hs-pragma">{-# INLINABLE find #-}</span><span>
</span><a name="line-737"></a><span>
</span><a name="line-738"></a><span class="hs-comment">{-| Find the index of the first element of a 'Producer' that satisfies the
    predicate
-}</span><span>
</span><a name="line-741"></a><span class="hs-identifier">findIndex</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070739"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070740"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070740"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070739"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070739"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">)</span><span>
</span><a name="line-742"></a><a name="findIndex"><a href="Pipes.Prelude.html#findIndex"><span class="hs-identifier">findIndex</span></a></a><span> </span><a name="local-6989586621679073450"><a href="#local-6989586621679073450"><span class="hs-identifier">predicate</span></a></a><span> </span><a name="local-6989586621679073451"><a href="#local-6989586621679073451"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073451"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#findIndices"><span class="hs-identifier hs-var">findIndices</span></a><span> </span><a href="#local-6989586621679073450"><span class="hs-identifier hs-var">predicate</span></a><span class="hs-special">)</span><span>
</span><a name="line-743"></a><span class="hs-pragma">{-# INLINABLE findIndex #-}</span><span>
</span><a name="line-744"></a><span>
</span><a name="line-745"></a><span class="hs-comment">-- | Retrieve the first element from a 'Producer'</span><span>
</span><a name="line-746"></a><span class="hs-identifier">head</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070737"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070738"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070737"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070737"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070738"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-747"></a><a name="head"><a href="Pipes.Prelude.html#head"><span class="hs-identifier">head</span></a></a><span> </span><a name="local-6989586621679073452"><a href="#local-6989586621679073452"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-748"></a><span>    </span><a name="local-6989586621679073453"><a href="#local-6989586621679073453"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073452"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-749"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073453"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-750"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-751"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073454"><a href="#local-6989586621679073454"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073454"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-752"></a><span class="hs-pragma">{-# INLINABLE head #-}</span><span>
</span><a name="line-753"></a><span>
</span><a name="line-754"></a><span class="hs-comment">-- | Index into a 'Producer'</span><span>
</span><a name="line-755"></a><span class="hs-identifier">index</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070735"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070736"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070735"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070735"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070736"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-756"></a><a name="index"><a href="Pipes.Prelude.html#index"><span class="hs-identifier">index</span></a></a><span> </span><a name="local-6989586621679073455"><a href="#local-6989586621679073455"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679073456"><a href="#local-6989586621679073456"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#head"><span class="hs-identifier hs-var">head</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073456"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.html#%3E-%3E"><span class="hs-operator hs-var">&gt;-&gt;</span></a><span> </span><a href="Pipes.Prelude.html#drop"><span class="hs-identifier hs-var">drop</span></a><span> </span><a href="#local-6989586621679073455"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span>
</span><a name="line-757"></a><span class="hs-pragma">{-# INLINABLE index #-}</span><span>
</span><a name="line-758"></a><span>
</span><a name="line-759"></a><span class="hs-comment">-- | Retrieve the last element from a 'Producer'</span><span>
</span><a name="line-760"></a><span class="hs-identifier">last</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070733"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070734"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070733"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070733"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070734"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-761"></a><a name="last"><a href="Pipes.Prelude.html#last"><span class="hs-identifier">last</span></a></a><span> </span><a name="local-6989586621679073457"><a href="#local-6989586621679073457"><span class="hs-identifier">p0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-762"></a><span>    </span><a name="local-6989586621679073464"><a href="#local-6989586621679073464"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073457"><span class="hs-identifier hs-var">p0</span></a><span>
</span><a name="line-763"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073464"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-764"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-765"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073465"><a href="#local-6989586621679073465"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073466"><a href="#local-6989586621679073466"><span class="hs-identifier">p'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073458"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073465"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073466"><span class="hs-identifier hs-var">p'</span></a><span>
</span><a name="line-766"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-767"></a><span>    </span><a name="local-6989586621679073458"><a href="#local-6989586621679073458"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073459"><a href="#local-6989586621679073459"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679073460"><a href="#local-6989586621679073460"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-768"></a><span>        </span><a name="local-6989586621679073461"><a href="#local-6989586621679073461"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073460"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-769"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073461"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-770"></a><span>            </span><span class="hs-identifier hs-var">Left</span><span>   </span><span class="hs-identifier">_</span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073459"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-771"></a><span>            </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073462"><a href="#local-6989586621679073462"><span class="hs-identifier">a'</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073463"><a href="#local-6989586621679073463"><span class="hs-identifier">p'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073458"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073462"><span class="hs-identifier hs-var">a'</span></a><span> </span><a href="#local-6989586621679073463"><span class="hs-identifier hs-var">p'</span></a><span>
</span><a name="line-772"></a><span class="hs-pragma">{-# INLINABLE last #-}</span><span>
</span><a name="line-773"></a><span>
</span><a name="line-774"></a><span class="hs-comment">-- | Count the number of elements in a 'Producer'</span><span>
</span><a name="line-775"></a><span class="hs-identifier">length</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070731"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070732"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070731"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070731"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-776"></a><a name="length"><a href="Pipes.Prelude.html#length"><span class="hs-identifier">length</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679073467"><a href="#local-6989586621679073467"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073467"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">+</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-777"></a><span class="hs-pragma">{-# INLINABLE length #-}</span><span>
</span><a name="line-778"></a><span>
</span><a name="line-779"></a><span class="hs-comment">-- | Find the maximum element of a 'Producer'</span><span>
</span><a name="line-780"></a><span class="hs-identifier">maximum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070729"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679070730"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070730"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070729"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070729"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070730"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-781"></a><a name="maximum"><a href="Pipes.Prelude.html#maximum"><span class="hs-identifier">maximum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073468"><span class="hs-identifier hs-var">step</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-782"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-783"></a><span>    </span><a name="local-6989586621679073468"><a href="#local-6989586621679073468"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073469"><a href="#local-6989586621679073469"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073470"><a href="#local-6989586621679073470"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073469"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-784"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073470"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-785"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073471"><a href="#local-6989586621679073471"><span class="hs-identifier">a'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">max</span><span> </span><a href="#local-6989586621679073470"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073471"><span class="hs-identifier hs-var">a'</span></a><span>
</span><a name="line-786"></a><span class="hs-pragma">{-# INLINABLE maximum #-}</span><span>
</span><a name="line-787"></a><span>
</span><a name="line-788"></a><span class="hs-comment">-- | Find the minimum element of a 'Producer'</span><span>
</span><a name="line-789"></a><span class="hs-identifier">minimum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070727"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679070728"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070728"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070727"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070727"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679070728"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-790"></a><a name="minimum"><a href="Pipes.Prelude.html#minimum"><span class="hs-identifier">minimum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073472"><span class="hs-identifier hs-var">step</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-791"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-792"></a><span>    </span><a name="local-6989586621679073472"><a href="#local-6989586621679073472"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073473"><a href="#local-6989586621679073473"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073474"><a href="#local-6989586621679073474"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073473"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-793"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073474"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-794"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073475"><a href="#local-6989586621679073475"><span class="hs-identifier">a'</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">min</span><span> </span><a href="#local-6989586621679073474"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073475"><span class="hs-identifier hs-var">a'</span></a><span>
</span><a name="line-795"></a><span class="hs-pragma">{-# INLINABLE minimum #-}</span><span>
</span><a name="line-796"></a><span>
</span><a name="line-797"></a><span class="hs-comment">-- | Determine if a 'Producer' is empty</span><span>
</span><a name="line-798"></a><span class="hs-identifier">null</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070725"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070726"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070725"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070725"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-799"></a><a name="null"><a href="Pipes.Prelude.html#null"><span class="hs-identifier">null</span></a></a><span> </span><a name="local-6989586621679073476"><a href="#local-6989586621679073476"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-800"></a><span>    </span><a name="local-6989586621679073477"><a href="#local-6989586621679073477"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073476"><span class="hs-identifier hs-var">p</span></a><span>
</span><a name="line-801"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073477"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-802"></a><span>        </span><span class="hs-identifier hs-var">Left</span><span>  </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-803"></a><span>        </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span>
</span><a name="line-804"></a><span class="hs-pragma">{-# INLINABLE null #-}</span><span>
</span><a name="line-805"></a><span>
</span><a name="line-806"></a><span class="hs-comment">-- | Compute the sum of the elements of a 'Producer'</span><span>
</span><a name="line-807"></a><span class="hs-identifier">sum</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070723"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Num</span><span> </span><a href="#local-6989586621679070724"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070724"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070723"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070723"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070724"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-808"></a><a name="sum"><a href="Pipes.Prelude.html#sum"><span class="hs-identifier">sum</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">+</span><span class="hs-special">)</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-809"></a><span class="hs-pragma">{-# INLINABLE sum #-}</span><span>
</span><a name="line-810"></a><span>
</span><a name="line-811"></a><span class="hs-comment">-- | Compute the product of the elements of a 'Producer'</span><span>
</span><a name="line-812"></a><span class="hs-identifier">product</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070721"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Num</span><span> </span><a href="#local-6989586621679070722"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070722"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070721"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070721"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070722"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-813"></a><a name="product"><a href="Pipes.Prelude.html#product"><span class="hs-identifier">product</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">*</span><span class="hs-special">)</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-814"></a><span class="hs-pragma">{-# INLINABLE product #-}</span><span>
</span><a name="line-815"></a><span>
</span><a name="line-816"></a><span class="hs-comment">-- | Convert a pure 'Producer' into a list</span><span>
</span><a name="line-817"></a><span class="hs-identifier">toList</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070720"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-identifier hs-type">Identity</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679070720"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-818"></a><a name="toList"><a href="Pipes.Prelude.html#toList"><span class="hs-identifier">toList</span></a></a><span> </span><a name="local-6989586621679073478"><a href="#local-6989586621679073478"><span class="hs-identifier">prod0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">build</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073479"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073478"><span class="hs-identifier hs-var">prod0</span></a><span class="hs-special">)</span><span>
</span><a name="line-819"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-820"></a><span>    </span><a name="local-6989586621679073479"><a href="#local-6989586621679073479"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073480"><a href="#local-6989586621679073480"><span class="hs-identifier">prod</span></a></a><span> </span><a name="local-6989586621679073481"><a href="#local-6989586621679073481"><span class="hs-identifier">cons</span></a></a><span> </span><a name="local-6989586621679073482"><a href="#local-6989586621679073482"><span class="hs-identifier">nil</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-821"></a><span>      </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073480"><span class="hs-identifier hs-var">prod</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-822"></a><span>        </span><a href="Pipes.Internal.html#Request"><span class="hs-identifier hs-var">Request</span></a><span> </span><a name="local-6989586621679073483"><a href="#local-6989586621679073483"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073483"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-823"></a><span>        </span><a href="Pipes.Internal.html#Respond"><span class="hs-identifier hs-var">Respond</span></a><span> </span><a name="local-6989586621679073484"><a href="#local-6989586621679073484"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679073485"><a href="#local-6989586621679073485"><span class="hs-identifier">fu</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073481"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073484"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073479"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073485"><span class="hs-identifier hs-var">fu</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679073481"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073482"><span class="hs-identifier hs-var">nil</span></a><span class="hs-special">)</span><span>
</span><a name="line-824"></a><span>        </span><a href="Pipes.Internal.html#M"><span class="hs-identifier hs-var">M</span></a><span>         </span><a name="local-6989586621679073486"><a href="#local-6989586621679073486"><span class="hs-identifier">m</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073479"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">runIdentity</span><span> </span><a href="#local-6989586621679073486"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679073481"><span class="hs-identifier hs-var">cons</span></a><span> </span><a href="#local-6989586621679073482"><span class="hs-identifier hs-var">nil</span></a><span>
</span><a name="line-825"></a><span>        </span><a href="Pipes.Internal.html#Pure"><span class="hs-identifier hs-var">Pure</span></a><span>    </span><span class="hs-identifier">_</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679073482"><span class="hs-identifier hs-var">nil</span></a><span>
</span><a name="line-826"></a><span class="hs-pragma">{-# INLINE toList #-}</span><span>
</span><a name="line-827"></a><span>
</span><a name="line-828"></a><span class="hs-comment">{-| Convert an effectful 'Producer' into a list

    Note: 'toListM' is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the elements
    immediately as they are generated instead of loading all elements into
    memory.
-}</span><span>
</span><a name="line-835"></a><span class="hs-identifier">toListM</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070718"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070719"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070718"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070718"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679070719"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-836"></a><a name="toListM"><a href="Pipes.Prelude.html#toListM"><span class="hs-identifier">toListM</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold"><span class="hs-identifier hs-var">fold</span></a><span> </span><a href="#local-6989586621679073487"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073488"><span class="hs-identifier hs-var">begin</span></a><span> </span><a href="#local-6989586621679073489"><span class="hs-identifier hs-var">done</span></a><span>
</span><a name="line-837"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-838"></a><span>    </span><a name="local-6989586621679073487"><a href="#local-6989586621679073487"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073490"><a href="#local-6989586621679073490"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073491"><a href="#local-6989586621679073491"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073490"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073491"><span class="hs-identifier hs-var">a</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><a name="line-839"></a><span>    </span><a name="local-6989586621679073488"><a href="#local-6989586621679073488"><span class="hs-identifier">begin</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-840"></a><span>    </span><a name="local-6989586621679073489"><a href="#local-6989586621679073489"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073492"><a href="#local-6989586621679073492"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073492"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-841"></a><span class="hs-pragma">{-# INLINABLE toListM #-}</span><span>
</span><a name="line-842"></a><span>
</span><a name="line-843"></a><span class="hs-comment">{-| Convert an effectful 'Producer' into a list alongside the return value

    Note: 'toListM'' is not an idiomatic use of @pipes@, but I provide it for
    simple testing purposes.  Idiomatic @pipes@ style consumes the elements
    immediately as they are generated instead of loading all elements into
    memory.
-}</span><span>
</span><a name="line-850"></a><span class="hs-identifier">toListM'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070715"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070716"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070715"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070717"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070715"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="#local-6989586621679070716"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070717"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-851"></a><a name="toListM%27"><a href="Pipes.Prelude.html#toListM%27"><span class="hs-identifier">toListM'</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#fold%27"><span class="hs-identifier hs-var">fold'</span></a><span> </span><a href="#local-6989586621679073493"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073494"><span class="hs-identifier hs-var">begin</span></a><span> </span><a href="#local-6989586621679073495"><span class="hs-identifier hs-var">done</span></a><span>
</span><a name="line-852"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-853"></a><span>    </span><a name="local-6989586621679073493"><a href="#local-6989586621679073493"><span class="hs-identifier">step</span></a></a><span> </span><a name="local-6989586621679073496"><a href="#local-6989586621679073496"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679073497"><a href="#local-6989586621679073497"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073496"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073497"><span class="hs-identifier hs-var">a</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><a name="line-854"></a><span>    </span><a name="local-6989586621679073494"><a href="#local-6989586621679073494"><span class="hs-identifier">begin</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-855"></a><span>    </span><a name="local-6989586621679073495"><a href="#local-6989586621679073495"><span class="hs-identifier">done</span></a></a><span> </span><a name="local-6989586621679073498"><a href="#local-6989586621679073498"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073498"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-856"></a><span class="hs-pragma">{-# INLINABLE toListM' #-}</span><span>
</span><a name="line-857"></a><span>
</span><a name="line-858"></a><span class="hs-comment">-- | Zip two 'Producer's</span><span>
</span><a name="line-859"></a><span class="hs-identifier">zip</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070711"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-860"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>   </span><a href="#local-6989586621679070712"><span class="hs-identifier hs-type">a</span></a><span>     </span><a href="#local-6989586621679070711"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070713"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-861"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>      </span><a href="#local-6989586621679070714"><span class="hs-identifier hs-type">b</span></a><span>  </span><a href="#local-6989586621679070711"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070713"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-862"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070712"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070714"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679070711"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070713"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-863"></a><a name="zip"><a href="Pipes.Prelude.html#zip"><span class="hs-identifier">zip</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><a name="line-864"></a><span class="hs-pragma">{-# INLINABLE zip #-}</span><span>
</span><a name="line-865"></a><span>
</span><a name="line-866"></a><span class="hs-comment">-- | Zip two 'Producer's using the provided combining function</span><span>
</span><a name="line-867"></a><span class="hs-identifier">zipWith</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070706"><span class="hs-identifier hs-type">m</span></a><span>
</span><a name="line-868"></a><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070707"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070708"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070709"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-869"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>  </span><a href="#local-6989586621679070707"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070706"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070710"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-870"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span>  </span><a href="#local-6989586621679070708"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070706"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070710"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-871"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Pipes.Core.html#Producer%27"><span class="hs-identifier hs-type">Producer'</span></a><span> </span><a href="#local-6989586621679070709"><span class="hs-identifier hs-type">c</span></a><span> </span><a href="#local-6989586621679070706"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070710"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span>
</span><a name="line-872"></a><a name="zipWith"><a href="Pipes.Prelude.html#zipWith"><span class="hs-identifier">zipWith</span></a></a><span> </span><a name="local-6989586621679073499"><a href="#local-6989586621679073499"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073500"><span class="hs-identifier hs-var">go</span></a><span>
</span><a name="line-873"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-874"></a><span>    </span><a name="local-6989586621679073500"><a href="#local-6989586621679073500"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073501"><a href="#local-6989586621679073501"><span class="hs-identifier">p1</span></a></a><span> </span><a name="local-6989586621679073502"><a href="#local-6989586621679073502"><span class="hs-identifier">p2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-875"></a><span>        </span><a name="local-6989586621679073503"><a href="#local-6989586621679073503"><span class="hs-identifier">e1</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073501"><span class="hs-identifier hs-var">p1</span></a><span>
</span><a name="line-876"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073503"><span class="hs-identifier hs-var">e1</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-877"></a><span>            </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073504"><a href="#local-6989586621679073504"><span class="hs-identifier">r</span></a></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073504"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-878"></a><span>            </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073505"><a href="#local-6989586621679073505"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073506"><a href="#local-6989586621679073506"><span class="hs-identifier">p1'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-879"></a><span>                </span><a name="local-6989586621679073507"><a href="#local-6989586621679073507"><span class="hs-identifier">e2</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Pipes.html#next"><span class="hs-identifier hs-var">next</span></a><span> </span><a href="#local-6989586621679073502"><span class="hs-identifier hs-var">p2</span></a><span>
</span><a name="line-880"></a><span>                </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073507"><span class="hs-identifier hs-var">e2</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-881"></a><span>                    </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073508"><a href="#local-6989586621679073508"><span class="hs-identifier">r</span></a></a><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073508"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-882"></a><span>                    </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073509"><a href="#local-6989586621679073509"><span class="hs-identifier">b</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679073510"><a href="#local-6989586621679073510"><span class="hs-identifier">p2'</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-883"></a><span>                        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073499"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679073505"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679073509"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-884"></a><span>                        </span><a href="#local-6989586621679073500"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073506"><span class="hs-identifier hs-var">p1'</span></a><span> </span><a href="#local-6989586621679073510"><span class="hs-identifier hs-var">p2'</span></a><span>
</span><a name="line-885"></a><span class="hs-pragma">{-# INLINABLE zipWith #-}</span><span>
</span><a name="line-886"></a><span>
</span><a name="line-887"></a><span class="hs-comment">{-| Transform a 'Consumer' to a 'Pipe' that reforwards all values further
    downstream
-}</span><span>
</span><a name="line-890"></a><span class="hs-identifier">tee</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070703"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Consumer"><span class="hs-identifier hs-type">Consumer</span></a><span> </span><a href="#local-6989586621679070704"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070703"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070705"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070704"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070704"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070703"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070705"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-891"></a><a name="tee"><a href="Pipes.Prelude.html#tee"><span class="hs-identifier">tee</span></a></a><span> </span><a name="local-6989586621679073511"><a href="#local-6989586621679073511"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-892"></a><span>    </span><a name="local-6989586621679073518"><a href="#local-6989586621679073518"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679073512"><span class="hs-identifier hs-var">up</span></a><span> </span><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator hs-var">&gt;\\</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">hoist</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073511"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator hs-var">//&gt;</span></a><span> </span><a href="#local-6989586621679073513"><span class="hs-identifier hs-var">dn</span></a><span class="hs-special">)</span><span>
</span><a name="line-893"></a><span>    </span><a name="local-6989586621679073519"><a href="#local-6989586621679073519"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-894"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073519"><span class="hs-identifier hs-var">ma</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-895"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-896"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073520"><a href="#local-6989586621679073520"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073520"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-897"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073518"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-898"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-899"></a><span>    </span><a name="local-6989586621679073512"><a href="#local-6989586621679073512"><span class="hs-identifier">up</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-900"></a><span>        </span><a name="local-6989586621679073514"><a href="#local-6989586621679073514"><span class="hs-identifier">ma</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-901"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073514"><span class="hs-identifier hs-var">ma</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-902"></a><span>            </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-903"></a><span>            </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679073515"><a href="#local-6989586621679073515"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073515"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-904"></a><span>        </span><a name="local-6989586621679073516"><a href="#local-6989586621679073516"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.html#await"><span class="hs-identifier hs-var">await</span></a><span>
</span><a name="line-905"></a><span>        </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">put</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679073516"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-906"></a><span>        </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073516"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-907"></a><span>    </span><a name="local-6989586621679073513"><a href="#local-6989586621679073513"><span class="hs-identifier">dn</span></a></a><span> </span><a name="local-6989586621679073517"><a href="#local-6989586621679073517"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Internal.html#closed"><span class="hs-identifier hs-var">closed</span></a><span> </span><a href="#local-6989586621679073517"><span class="hs-identifier hs-var">v</span></a><span>
</span><a name="line-908"></a><span class="hs-pragma">{-# INLINABLE tee #-}</span><span>
</span><a name="line-909"></a><span>
</span><a name="line-910"></a><span class="hs-comment">{-| Transform a unidirectional 'Pipe' to a bidirectional 'Proxy'

&gt; generalize (f &gt;-&gt; g) = generalize f &gt;+&gt; generalize g
&gt;
&gt; generalize cat = pull
-}</span><span>
</span><a name="line-916"></a><span class="hs-identifier">generalize</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070698"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Pipes.Core.html#Pipe"><span class="hs-identifier hs-type">Pipe</span></a><span> </span><a href="#local-6989586621679070699"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070700"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070698"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070701"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070702"><span class="hs-identifier hs-type">x</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Internal.html#Proxy"><span class="hs-identifier hs-type">Proxy</span></a><span> </span><a href="#local-6989586621679070702"><span class="hs-identifier hs-type">x</span></a><span> </span><a href="#local-6989586621679070699"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070702"><span class="hs-identifier hs-type">x</span></a><span> </span><a href="#local-6989586621679070700"><span class="hs-identifier hs-type">b</span></a><span> </span><a href="#local-6989586621679070698"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070701"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-917"></a><a name="generalize"><a href="Pipes.Prelude.html#generalize"><span class="hs-identifier">generalize</span></a></a><span> </span><a name="local-6989586621679073521"><a href="#local-6989586621679073521"><span class="hs-identifier">p</span></a></a><span> </span><a name="local-6989586621679073522"><a href="#local-6989586621679073522"><span class="hs-identifier">x0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Pipes.Lift.html#evalStateP"><span class="hs-identifier hs-var">evalStateP</span></a><span> </span><a href="#local-6989586621679073522"><span class="hs-identifier hs-var">x0</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679073523"><span class="hs-identifier hs-var">up</span></a><span> </span><a href="Pipes.Core.html#%3E%5C%5C"><span class="hs-operator hs-var">&gt;\\</span></a><span> </span><span class="hs-identifier hs-var">hoist</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><a href="#local-6989586621679073521"><span class="hs-identifier hs-var">p</span></a><span> </span><a href="Pipes.Core.html#%2F%2F%3E"><span class="hs-operator hs-var">//&gt;</span></a><span> </span><a href="#local-6989586621679073524"><span class="hs-identifier hs-var">dn</span></a><span>
</span><a name="line-918"></a><span>  </span><span class="hs-keyword">where</span><span>
</span><a name="line-919"></a><span>    </span><a name="local-6989586621679073523"><a href="#local-6989586621679073523"><span class="hs-identifier">up</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-920"></a><span>        </span><a name="local-6989586621679073525"><a href="#local-6989586621679073525"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-identifier hs-var">get</span><span>
</span><a name="line-921"></a><span>        </span><a href="Pipes.Core.html#request"><span class="hs-identifier hs-var">request</span></a><span> </span><a href="#local-6989586621679073525"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-922"></a><span>    </span><a name="local-6989586621679073524"><a href="#local-6989586621679073524"><span class="hs-identifier">dn</span></a></a><span> </span><a name="local-6989586621679073526"><a href="#local-6989586621679073526"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-923"></a><span>        </span><a name="local-6989586621679073527"><a href="#local-6989586621679073527"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Pipes.Core.html#respond"><span class="hs-identifier hs-var">respond</span></a><span> </span><a href="#local-6989586621679073526"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-924"></a><span>        </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">put</span><span> </span><a href="#local-6989586621679073527"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-925"></a><span class="hs-pragma">{-# INLINABLE generalize #-}</span><span>
</span><a name="line-926"></a><span>
</span><a name="line-927"></a><span class="hs-comment">{-| The natural unfold into a 'Producer' with a step function and a seed 

&gt; unfoldr next = id
-}</span><span>
</span><a name="line-931"></a><span class="hs-identifier">unfoldr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><a href="#local-6989586621679070694"><span class="hs-identifier hs-type">m</span></a><span> </span><span>
</span><a name="line-932"></a><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070695"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070694"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679070696"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679070697"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679070695"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679070695"><span class="hs-identifier hs-type">s</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Pipes.Core.html#Producer"><span class="hs-identifier hs-type">Producer</span></a><span> </span><a href="#local-6989586621679070697"><span class="hs-identifier hs-type">a</span></a><span> </span><a href="#local-6989586621679070694"><span class="hs-identifier hs-type">m</span></a><span> </span><a href="#local-6989586621679070696"><span class="hs-identifier hs-type">r</span></a><span>
</span><a name="line-933"></a><a name="unfoldr"><a href="Pipes.Prelude.html#unfoldr"><span class="hs-identifier">unfoldr</span></a></a><span> </span><a name="local-6989586621679073528"><a href="#local-6989586621679073528"><span class="hs-identifier">step</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679073529"><span class="hs-identifier hs-var">go</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-934"></a><span>  </span><a name="local-6989586621679073529"><a href="#local-6989586621679073529"><span class="hs-identifier">go</span></a></a><span> </span><a name="local-6989586621679073530"><a href="#local-6989586621679073530"><span class="hs-identifier">s0</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-935"></a><span>    </span><a name="local-6989586621679073531"><a href="#local-6989586621679073531"><span class="hs-identifier">e</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lift</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679073528"><span class="hs-identifier hs-var">step</span></a><span> </span><a href="#local-6989586621679073530"><span class="hs-identifier hs-var">s0</span></a><span class="hs-special">)</span><span>
</span><a name="line-936"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679073531"><span class="hs-identifier hs-var">e</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-937"></a><span>      </span><span class="hs-identifier hs-var">Left</span><span> </span><a name="local-6989586621679073532"><a href="#local-6989586621679073532"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679073532"><span class="hs-identifier hs-var">r</span></a><span>
</span><a name="line-938"></a><span>      </span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679073533"><a href="#local-6989586621679073533"><span class="hs-identifier">a</span></a></a><span class="hs-special">,</span><a name="local-6989586621679073534"><a href="#local-6989586621679073534"><span class="hs-identifier">s</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span>
</span><a name="line-939"></a><span>        </span><a href="Pipes.html#yield"><span class="hs-identifier hs-var">yield</span></a><span> </span><a href="#local-6989586621679073533"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-940"></a><span>        </span><a href="#local-6989586621679073529"><span class="hs-identifier hs-var">go</span></a><span> </span><a href="#local-6989586621679073534"><span class="hs-identifier hs-var">s</span></a><span>
</span><a name="line-941"></a><span class="hs-pragma">{-# INLINABLE unfoldr #-}</span><span>
</span><a name="line-942"></a></pre></body></html>