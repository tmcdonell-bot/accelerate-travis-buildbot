<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Array.Accelerate.LLVM.PTX</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Data.Array.Accelerate.LLVM.PTX.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">accelerate-llvm-ptx-1.1.0.0: Accelerate backend for NVIDIA GPUs</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>[2014..2017] Trevor L. McDonell<br />[2014..2014] Vinod Grover (NVIDIA Corporation)</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Trevor L. McDonell &lt;tmcdonell@cse.unsw.edu.au&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable (GHC extensions)</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Array.Accelerate.LLVM.PTX</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Synchronous execution</a></li><li><a href="#g:2">Asynchronous execution</a></li><li><a href="#g:3">Ahead-of-time compilation</a></li><li><a href="#g:4">Execution targets</a></li><li><a href="#g:5">Controlling host-side allocation</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module implements a backend for the <em>Accelerate</em> language targeting
 NVPTX for execution on NVIDIA GPUs. Expressions are on-line translated into
 LLVM code, which is just-in-time executed in parallel on the GPU.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Acc">Acc</a> a :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><span class="keyword">class</span> (<a href="../base-4.10.0.0/Type-Reflection.html#t:Typeable">Typeable</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> a, <a href="../base-4.10.0.0/Type-Reflection.html#t:Typeable">Typeable</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (ArrRepr a)) =&gt; <a href="#t:Arrays">Arrays</a> a</li><li class="src short"><a href="#v:run">run</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; a</li><li class="src short"><a href="#v:runWith">runWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; a</li><li class="src short"><a href="#v:run1">run1</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; b</li><li class="src short"><a href="#v:run1With">run1With</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; b</li><li class="src short"><a href="#v:runN">runN</a> :: Afunction f =&gt; f -&gt; AfunctionR f</li><li class="src short"><a href="#v:runNWith">runNWith</a> :: Afunction f =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; f -&gt; AfunctionR f</li><li class="src short"><a href="#v:stream">stream</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; [a] -&gt; [b]</li><li class="src short"><a href="#v:streamWith">streamWith</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; [a] -&gt; [b]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Async">Async</a> a :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a></li><li class="src short"><a href="#v:wait">wait</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:poll">poll</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:cancel">cancel</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runAsync">runAsync</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a)</li><li class="src short"><a href="#v:runAsyncWith">runAsyncWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a)</li><li class="src short"><a href="#v:run1Async">run1Async</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> b)</li><li class="src short"><a href="#v:run1AsyncWith">run1AsyncWith</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> b)</li><li class="src short"><a href="#v:runNAsync">runNAsync</a> :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; f -&gt; r</li><li class="src short"><a href="#v:runNAsyncWith">runNAsyncWith</a> :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; f -&gt; r</li><li class="src short"><a href="#v:runQ">runQ</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a></li><li class="src short"><a href="#v:runQWith">runQWith</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a></li><li class="src short"><a href="#v:runQAsync">runQAsync</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a></li><li class="src short"><a href="#v:runQAsyncWith">runQAsyncWith</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PTX">PTX</a></li><li class="src short"><a href="#v:createTargetForDevice">createTargetForDevice</a> :: <a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Device.html#t:Device">Device</a> -&gt; <a href="../cuda-0.8.0.0/Foreign-CUDA-Analysis-Device.html#t:DeviceProperties">DeviceProperties</a> -&gt; [<a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Context-Base.html#t:ContextFlag">ContextFlag</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></li><li class="src short"><a href="#v:createTargetFromContext">createTargetFromContext</a> :: <a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Context-Base.html#t:Context">Context</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></li><li class="src short"><a href="#v:registerPinnedAllocator">registerPinnedAllocator</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:registerPinnedAllocatorWith">registerPinnedAllocatorWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Acc" class="def">Acc</a> a :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Acc" class="selflink">#</a></p><div class="doc"><p>Accelerate is an <em>embedded language</em> that distinguishes between vanilla
 arrays (e.g. in Haskell memory on the CPU) and embedded arrays (e.g. in
 device memory on a GPU), as well as the computations on both of these. Since
 Accelerate is an embedded language, programs written in Accelerate are not
 compiled by the Haskell compiler (GHC). Rather, each Accelerate backend is
 a <em>runtime compiler</em> which generates and executes parallel SIMD code of the
 target language at application <em>runtime</em>.</p><p>The type constructor <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> represents embedded collective array operations.
 A term of type <code>Acc a</code> is an Accelerate program which, once executed, will
 produce a value of type <code>a</code> (an <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a></code> or a tuple of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a></code>). Collective
 operations of type <code>Acc a</code> comprise many <em>scalar expressions</em>, wrapped in
 type constructor <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Exp">Exp</a></code>, which will be executed in parallel. Although
 collective operations comprise many scalar operations executed in parallel,
 scalar operations <em>cannot</em> initiate new collective operations: this
 stratification between scalar operations in <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Exp">Exp</a></code> and array operations in
 <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> helps statically exclude <em>nested data parallelism</em>, which is difficult
 to execute efficiently on constrained hardware such as GPUs.</p><p>For example, to compute a vector dot product we could write:</p><pre>dotp :: Num a =&gt; Vector a -&gt; Vector a -&gt; Acc (Scalar a)
dotp xs ys =
  let
      xs' = use xs
      ys' = use ys
  in
  fold (+) 0 ( zipWith (*) xs' ys' )</pre><p>The function <code>dotp</code> consumes two one-dimensional arrays (<code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Vector">Vector</a></code>s) of
 values, and produces a single (<code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Scalar">Scalar</a></code>) result as output. As the return type
 is wrapped in the type <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code>, we see that it is an embedded Accelerate
 computation - it will be evaluated in the <em>object</em> language of dynamically
 generated parallel code, rather than the <em>meta</em> language of vanilla Haskell.</p><p>As the arguments to <code>dotp</code> are plain Haskell arrays, to make these available
 to Accelerate computations they must be embedded with the
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate-Language.html#v:use">use</a></code> function.</p><p>An Accelerate backend is used to evaluate the embedded computation and return
 the result back to vanilla Haskell. Calling the <code>run</code> function of a backend
 will generate code for the target architecture, compile, and execute it. For
 example, the following backends are available:</p><ul><li><a href="http://hackage.haskell.org/package/accelerate-llvm-native">accelerate-llvm-native</a>: for execution on multicore CPUs</li><li><a href="http://hackage.haskell.org/package/accelerate-llvm-ptx">accelerate-llvm-ptx</a>: for execution on NVIDIA CUDA-capable GPUs</li></ul><p>See also <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Exp">Exp</a></code>, which encapsulates embedded <em>scalar</em> computations.</p><dl><dt><em>Fusion:</em></dt><dd></dd></dl><p>Array computations of type <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> will be subject to <em>array fusion</em>;
 Accelerate will combine individual <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> computations into a single
 computation, which reduces the number of traversals over the input data and
 thus improves performance. As such, it is often useful to have some intuition
 on when fusion should occur.</p><p>The main idea is to first partition array operations into two categories:</p><ol><li>Element-wise operations, such as <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:map">map</a></code>,
      <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:generate">generate</a></code>, and
      <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:backpermute">backpermute</a></code>. Each element of these operations
      can be computed independently of all others.</li><li>Collective operations such as <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code>,
      <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:scanl">scanl</a></code>, and <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:stencil">stencil</a></code>. To
      compute each output element of these operations requires reading
      multiple elements from the input array(s).</li></ol><p>Element-wise operations fuse together whenever the consumer operation uses
 a single element of the input array. Element-wise operations can both fuse
 their inputs into themselves, as well be fused into later operations. Both
 these examples should fuse into a single loop:</p><pre>map -&gt; reverse -&gt; reshape -&gt; map -&gt; map</pre><pre>map -&gt; backpermute -&gt;
                      zipWith -&gt; map
          generate -&gt;</pre><p>If the consumer operation uses more than one element of the input array
 (typically, via <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:generate">generate</a></code> indexing an array multiple
 times), then the input array will be completely evaluated first; no fusion
 occurs in this case, because fusing the first operation into the second
 implies duplicating work.</p><p>On the other hand, collective operations can fuse their input arrays into
 themselves, but on output always evaluate to an array; collective operations
 will not be fused into a later step. For example:</p><pre>     use -&gt;
            zipWith -&gt; fold |-&gt; map
generate -&gt;</pre><p>Here the element-wise sequence (<code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:use">use</a></code>
 + <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:generate">generate</a></code> + <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:zipWith">zipWith</a></code>) will
 fuse into a single operation, which then fuses into the collective
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code> operation. At this point in the program the
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code> must now be evaluated. In the final step the
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:map">map</a></code> reads in the array produced by
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code>. As there is no fusion between the
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code> and <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:map">map</a></code> steps, this
 program consists of two &quot;loops&quot;; one for the <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:use">use</a></code>
 + <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:generate">generate</a></code> + <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:zipWith">zipWith</a></code>
 + <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:fold">fold</a></code> step, and one for the final
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:map">map</a></code> step.</p><p>You can see how many operations will be executed in the fused program by
 <code><a href="../base-4.10.0.0/Text-Show.html#t:Show">Show</a></code>-ing the <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> program, or by using the debugging option <code>-ddump-dot</code>
 to save the program as a graphviz DOT file.</p><p>As a special note, the operations <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:unzip">unzip</a></code> and
 <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:reshape">reshape</a></code>, when applied to a real array, are executed
 in constant time, so in this situation these operations will not be fused.</p><dl><dt><em>Tips:</em></dt><dd></dd></dl><ul><li>Since <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code> represents embedded computations that will only be executed
    when evaluated by a backend, we can programatically generate these
    computations using the meta language Haskell; for example, unrolling loops
    or embedding input values into the generated code.</li><li>It is usually best to keep all intermediate computations in <code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a></code>, and
    only <code>run</code> the computation at the very end to produce the final result.
    This enables optimisations between intermediate results (e.g. array
    fusion) and, if the target architecture has a separate memory space as is
    the case of GPUs, to prevent excessive data transfers.</li></ul></div><div class="subs instances"><p id="control.i:Acc" class="caption collapser" onclick="toggleSection('i:Acc')">Instances</p><div id="section.i:Acc" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Acc:Afunction:1" class="instance expander" onclick="toggleSection('i:id:Acc:Afunction:1')"></span> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b =&gt; Afunction (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Acc:Afunction:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:aconvert">aconvert</a> :: Config -&gt; Layout aenv aenv -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b -&gt; OpenAfun aenv (AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b))</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Acc:Afunction:2" class="instance expander" onclick="toggleSection('i:id:Acc:Afunction:2')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, Afunction r) =&gt; Afunction (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Acc:Afunction:2" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r) :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:aconvert">aconvert</a> :: Config -&gt; Layout aenv aenv -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r) -&gt; OpenAfun aenv (AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r))</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Acc:AfunctionR:3" class="instance expander" onclick="toggleSection('i:id:Acc:AfunctionR:3')"></span> <span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Acc:AfunctionR:3" class="inst-details hide"><div class="src"><span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) = b</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Acc:AfunctionR:4" class="instance expander" onclick="toggleSection('i:id:Acc:AfunctionR:4')"></span> <span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Acc:AfunctionR:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> AfunctionR (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; r) = a -&gt; AfunctionR r</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> (<a href="../base-4.10.0.0/Type-Reflection.html#t:Typeable">Typeable</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> a, <a href="../base-4.10.0.0/Type-Reflection.html#t:Typeable">Typeable</a> <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> (ArrRepr a)) =&gt; <a id="t:Arrays" class="def">Arrays</a> a <a href="#t:Arrays" class="selflink">#</a></p><div class="doc"><p><code><a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a></code> consists of nested tuples of individual <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a></code>s, currently up to
 15-elements wide. Accelerate computations can thereby return multiple
 results.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src">arrays, flavour, toArr, fromArr</p></div><div class="subs instances"><p id="control.i:Arrays" class="caption collapser" onclick="toggleSection('i:Arrays')">Instances</p><div id="section.i:Arrays" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:1" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:1')"></span> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> ()</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: () -&gt; ArraysR (ArrRepr ())</p><p class="src"><a href="#v:flavour">flavour</a> :: () -&gt; ArraysFlavour ()</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr () -&gt; ()</p><p class="src"><a href="#v:fromArr">fromArr</a> :: () -&gt; ArrRepr ()</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:2" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:2')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b) -&gt; ArraysR (ArrRepr (a, b))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b) -&gt; ArraysFlavour (a, b)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b) -&gt; (a, b)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b) -&gt; ArrRepr (a, b)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:3" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:3')"></span> (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Shape">Shape</a> sh, <a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Elt">Elt</a> e) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: <a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e -&gt; ArraysR (ArrRepr (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e))</p><p class="src"><a href="#v:flavour">flavour</a> :: <a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e -&gt; ArraysFlavour (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e) -&gt; <a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e</p><p class="src"><a href="#v:fromArr">fromArr</a> :: <a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e -&gt; ArrRepr (<a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#t:Array">Array</a> sh e)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:4" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:4')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c) -&gt; ArraysR (ArrRepr (a, b, c))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c) -&gt; ArraysFlavour (a, b, c)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c) -&gt; (a, b, c)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c) -&gt; ArrRepr (a, b, c)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:5" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:5')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d) -&gt; ArraysR (ArrRepr (a, b, c, d))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d) -&gt; ArraysFlavour (a, b, c, d)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d) -&gt; (a, b, c, d)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d) -&gt; ArrRepr (a, b, c, d)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:6" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:6')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e) -&gt; ArraysR (ArrRepr (a, b, c, d, e))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e) -&gt; ArraysFlavour (a, b, c, d, e)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e) -&gt; (a, b, c, d, e)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e) -&gt; ArrRepr (a, b, c, d, e)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:7" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:7')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f) -&gt; ArraysFlavour (a, b, c, d, e, f)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f) -&gt; (a, b, c, d, e, f)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f) -&gt; ArrRepr (a, b, c, d, e, f)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:8" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:8')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g) -&gt; ArraysFlavour (a, b, c, d, e, f, g)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g) -&gt; (a, b, c, d, e, f, g)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g) -&gt; ArrRepr (a, b, c, d, e, f, g)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:9" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:9')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:9" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h) -&gt; (a, b, c, d, e, f, g, h)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h) -&gt; ArrRepr (a, b, c, d, e, f, g, h)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:10" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:10')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:10" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i) -&gt; (a, b, c, d, e, f, g, h, i)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:11" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:11')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:11" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j) -&gt; (a, b, c, d, e, f, g, h, i, j)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:12" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:12')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> k) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j, k)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:12" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j, k) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j, k))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j, k) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j, k)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j, k) -&gt; (a, b, c, d, e, f, g, h, i, j, k)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j, k) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j, k)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:13" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:13')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> k, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> l) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j, k, l)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:13" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j, k, l) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j, k, l) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j, k, l)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l) -&gt; (a, b, c, d, e, f, g, h, i, j, k, l)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j, k, l) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:14" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:14')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> k, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> l, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> m) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j, k, l, m)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:14" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j, k, l, m)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m) -&gt; (a, b, c, d, e, f, g, h, i, j, k, l, m)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:15" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:15')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> k, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> l, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> m, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> n) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j, k, l, m, n)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:15" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j, k, l, m, n)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n) -&gt; (a, b, c, d, e, f, g, h, i, j, k, l, m, n)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n)</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:Arrays:Arrays:16" class="instance expander" onclick="toggleSection('i:ic:Arrays:Arrays:16')"></span> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> c, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> d, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> e, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> f, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> g, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> h, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> i, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> j, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> k, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> l, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> m, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> n, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> o) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:Arrays:Arrays:16" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:arrays">arrays</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) -&gt; ArraysR (ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o))</p><p class="src"><a href="#v:flavour">flavour</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) -&gt; ArraysFlavour (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)</p><p class="src"><a href="#v:toArr">toArr</a> :: ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) -&gt; (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)</p><p class="src"><a href="#v:fromArr">fromArr</a> :: (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) -&gt; ArrRepr (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)</p></div></div></td></tr></table></div></div></div><h1 id="g:1">Synchronous execution</h1><div class="top"><p class="src"><a id="v:run" class="def">run</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; a <a href="src/Data.Array.Accelerate.LLVM.PTX.html#run" class="link">Source</a> <a href="#v:run" class="selflink">#</a></p><div class="doc"><p>Compile and run a complete embedded array program.</p><p>The result is copied back to the host only once the arrays are demanded (or
 the result is forced to normal form). For results consisting of multiple
 components (a tuple of arrays or array of tuples) this applies per primitive
 array. Evaluating the result of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run">run</a></code> to WHNF will initiate the computation,
 but does not copy the results back from the device.</p><p><em>NOTE:</em> it is recommended to use <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code> or <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runQ">runQ</a></code> whenever possible.</p></div></div><div class="top"><p class="src"><a id="v:runWith" class="def">runWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; a <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runWith" class="link">Source</a> <a href="#v:runWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run">run</a></code>, but execute using the specified target rather than using the
 default, automatically selected device.</p><p>Contexts passed to this function may all target to the same device, or to
 separate devices of differing compute capabilities.</p></div></div><div class="top"><p class="src"><a id="v:run1" class="def">run1</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; b <a href="src/Data.Array.Accelerate.LLVM.PTX.html#run1" class="link">Source</a> <a href="#v:run1" class="selflink">#</a></p><div class="doc"><p>This is <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code>, specialised to an array program of one argument.</p></div></div><div class="top"><p class="src"><a id="v:run1With" class="def">run1With</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; b <a href="src/Data.Array.Accelerate.LLVM.PTX.html#run1With" class="link">Source</a> <a href="#v:run1With" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run1">run1</a></code>, but execute using the specified target rather than using the
 default, automatically selected device.</p></div></div><div class="top"><p class="src"><a id="v:runN" class="def">runN</a> :: Afunction f =&gt; f -&gt; AfunctionR f <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runN" class="link">Source</a> <a href="#v:runN" class="selflink">#</a></p><div class="doc"><p>Prepare and execute an embedded array program.</p><p>This function can be used to improve performance in cases where the array
 program is constant between invocations, because it enables us to bypass
 front-end conversion stages and move directly to the execution phase. If you
 have a computation applied repeatedly to different input data, use this,
 specifying any changing aspects of the computation via the input parameters.
 If the function is only evaluated once, this is equivalent to <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run">run</a></code>.</p><p>In order to use <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code> you must express your Accelerate program as a function
 of array terms:</p><pre>f :: (Arrays a, Arrays b, ... Arrays c) =&gt; Acc a -&gt; Acc b -&gt; ... -&gt; Acc c</pre><p>This function then returns the compiled version of <code>f</code>:</p><pre>runN f :: (Arrays a, Arrays b, ... Arrays c) =&gt; a -&gt; b -&gt; ... -&gt; c</pre><p>At an example, rather than:</p><pre>step :: Acc (Vector a) -&gt; Acc (Vector b)
step = ...

simulate :: Vector a -&gt; Vector b
simulate xs = run $ step (use xs)</pre><p>Instead write:</p><pre>simulate = runN step</pre><p>You can use the debugging options to check whether this is working
 successfully. For example, running with the <code>-ddump-phases</code> flag should show
 that the compilation steps only happen once, not on the second and subsequent
 invocations of <code>simulate</code>. Note that this typically relies on GHC knowing
 that it can lift out the function returned by <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code> and reuse it.</p><p>As with <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run">run</a></code>, the resulting array(s) are only copied back to the host once
 they are actually demanded (forced to normal form). Thus, splitting a program
 into multiple <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code> steps does not imply transferring intermediate
 computations back and forth between host and device. However note that
 Accelerate is not able to optimise (fuse) across separate <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code> invocations.</p><p>See the programs in the 'accelerate-examples' package for examples.</p><p>See also <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runQ">runQ</a></code>, which compiles the Accelerate program at _Haskell_ compile
 time, thus eliminating the runtime overhead altogether.</p></div></div><div class="top"><p class="src"><a id="v:runNWith" class="def">runNWith</a> :: Afunction f =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; f -&gt; AfunctionR f <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runNWith" class="link">Source</a> <a href="#v:runNWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code>, but execute using the specified target device.</p></div></div><div class="top"><p class="src"><a id="v:stream" class="def">stream</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; [a] -&gt; [b] <a href="src/Data.Array.Accelerate.LLVM.PTX.html#stream" class="link">Source</a> <a href="#v:stream" class="selflink">#</a></p><div class="doc"><p>Stream a lazily read list of input arrays through the given program,
 collecting results as we go.</p></div></div><div class="top"><p class="src"><a id="v:streamWith" class="def">streamWith</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; [a] -&gt; [b] <a href="src/Data.Array.Accelerate.LLVM.PTX.html#streamWith" class="link">Source</a> <a href="#v:streamWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:stream">stream</a></code>, but execute using the specified target.</p></div></div><h1 id="g:2">Asynchronous execution</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Async" class="def">Async</a> a :: <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.10.0.0/Data-Kind.html#t:-42-">*</a> <a href="#t:Async" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:wait" class="def">wait</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> a <a href="#v:wait" class="selflink">#</a></p><div class="doc"><p>Block the calling thread until the computation completes, then return the
 result.</p></div></div><div class="top"><p class="src"><a id="v:poll" class="def">poll</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> a) <a href="#v:poll" class="selflink">#</a></p><div class="doc"><p>Test whether the asynchronous computation has already completed. If so,
 return the result, else <code><a href="../base-4.10.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:cancel" class="def">cancel</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="#v:cancel" class="selflink">#</a></p><div class="doc"><p>Cancel a running asynchronous computation.</p></div></div><div class="top"><p class="src"><a id="v:runAsync" class="def">runAsync</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a) <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runAsync" class="link">Source</a> <a href="#v:runAsync" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run">run</a></code>, but run the computation asynchronously and return immediately
 without waiting for the result. The status of the computation can be queried
 using <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:wait">wait</a></code>, <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:poll">poll</a></code>, and <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:cancel">cancel</a></code>.</p><p>Note that a CUDA context can be active on only one host thread at a time. If
 you want to execute multiple computations in parallel, on the same or
 different devices, use <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runAsyncWith">runAsyncWith</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:runAsyncWith" class="def">runAsyncWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> a) <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runAsyncWith" class="link">Source</a> <a href="#v:runAsyncWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runWith">runWith</a></code>, but execute asynchronously. Be sure not to destroy the context,
 or attempt to attach it to a different host thread, before all outstanding
 operations have completed.</p></div></div><div class="top"><p class="src"><a id="v:run1Async" class="def">run1Async</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> b) <a href="src/Data.Array.Accelerate.LLVM.PTX.html#run1Async" class="link">Source</a> <a href="#v:run1Async" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run1">run1</a></code>, but the computation is executed asynchronously.</p></div></div><div class="top"><p class="src"><a id="v:run1AsyncWith" class="def">run1AsyncWith</a> :: (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> a, <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Arrays">Arrays</a> b) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> a -&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:Acc">Acc</a> b) -&gt; a -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> (<a href="Data-Array-Accelerate-LLVM-PTX.html#t:Async">Async</a> b) <a href="src/Data.Array.Accelerate.LLVM.PTX.html#run1AsyncWith" class="link">Source</a> <a href="#v:run1AsyncWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:run1With">run1With</a></code>, but execute asynchronously.</p></div></div><div class="top"><p class="src"><a id="v:runNAsync" class="def">runNAsync</a> :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; f -&gt; r <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runNAsync" class="link">Source</a> <a href="#v:runNAsync" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code>, but execute asynchronously.</p></div></div><div class="top"><p class="src"><a id="v:runNAsyncWith" class="def">runNAsyncWith</a> :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; f -&gt; r <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runNAsyncWith" class="link">Source</a> <a href="#v:runNAsyncWith" class="selflink">#</a></p><div class="doc"><p>As <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runNWith">runNWith</a></code>, but execute asynchronously.</p></div></div><h1 id="g:3">Ahead-of-time compilation</h1><div class="top"><p class="src"><a id="v:runQ" class="def">runQ</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runQ" class="link">Source</a> <a href="#v:runQ" class="selflink">#</a></p><div class="doc"><p>Ahead-of-time compilation for an embedded array program.</p><p>This function will generate, compile, and link into the final executable,
 code to execute the given Accelerate computation <em>at Haskell compile time</em>.
 This eliminates any runtime overhead associated with the other <code>run*</code>
 operations. The generated code will be compiled for the current (default) GPU
 architecture.</p><p>Since the Accelerate program will be generated at Haskell compile time,
 construction of the Accelerate program, in particular via meta-programming,
 will be limited to operations available to that phase. Also note that any
 arrays which are embedded into the program via <code><a href="../accelerate-1.1.1.0/Data-Array-Accelerate.html#v:use">use</a></code>
 will be stored as part of the final executable.</p><p>Usage of this function in your program is similar to that of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code>. First,
 express your Accelerate program as a function of array terms:</p><pre>f :: (Arrays a, Arrays b, ... Arrays c) =&gt; Acc a -&gt; Acc b -&gt; ... -&gt; Acc c</pre><p>This function then returns a compiled version of <code>f</code> as a Template Haskell
 splice, to be added into your program at Haskell compile time:</p><pre>{-# LANGUAGE TemplateHaskell #-}

f' :: a -&gt; b -&gt; ... -&gt; c
f' = $( runQ f )</pre><p>Note that at the splice point the usage of <code>f</code> must monomorphic; i.e. the
 types <code>a</code>, <code>b</code> and <code>c</code> must be at some known concrete type.</p><p>See the <a href="https://github.com/tmcdonell/lulesh-accelerate">lulesh-accelerate</a>
 project for an example.</p><dl><dt><em>Note:</em></dt><dd></dd></dl><p>Due to <a href="https://ghc.haskell.org/trac/ghc/ticket/13587">GHC#13587</a>, this
 currently must be as an <em>untyped</em> splice.</p><p>The correct type of this function is similar to that of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runN">runN</a></code>:</p><pre>runQ :: Afunction f =&gt; f -&gt; Q (TExp (AfunctionR f))</pre><p><em>Since: 1.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:runQWith" class="def">runQWith</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runQWith" class="link">Source</a> <a href="#v:runQWith" class="selflink">#</a></p><div class="doc"><p>Ahead-of-time analogue of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runNWith">runNWith</a></code>. See <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runQ">runQ</a></code> for more information.</p><p><em>NOTE:</em> The supplied (at runtime) target must be compatible with the
 architecture that this function was compiled for (the <code>defaultTarget</code> of the
 compiling machine). Running on a device with the same compute capability is
 best, but this should also be forward compatible to newer architectures.</p><p>The correct type of this function is:</p><pre>runQWith :: Afunction f =&gt; f -&gt; Q (TExp (PTX -&gt; AfunctionR f))</pre><p><em>Since: 1.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:runQAsync" class="def">runQAsync</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runQAsync" class="link">Source</a> <a href="#v:runQAsync" class="selflink">#</a></p><div class="doc"><p>Ahead-of-time analogue of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runNAsync">runNAsync</a></code>. See <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runQ">runQ</a></code> for more information.</p><p>The correct type of this function is:</p><pre>runQAsync :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; f -&gt; Q (TExp r)</pre><p><em>Since: 1.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:runQAsyncWith" class="def">runQAsyncWith</a> :: Afunction f =&gt; f -&gt; <a href="../template-haskell-2.12.0.0/Language-Haskell-TH-Lib.html#t:ExpQ">ExpQ</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.html#runQAsyncWith" class="link">Source</a> <a href="#v:runQAsyncWith" class="selflink">#</a></p><div class="doc"><p>Ahead-of-time analogue of <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runNAsyncWith">runNAsyncWith</a></code>. See <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:runQWith">runQWith</a></code> for more information.</p><p>The correct type of this function is:</p><pre>runQAsyncWith :: (Afunction f, RunAsync r, AfunctionR f ~ RunAsyncR r) =&gt; f -&gt; Q (TExp (PTX -&gt; r))</pre><p><em>Since: 1.1.0.0</em></p></div></div><h1 id="g:4">Execution targets</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PTX" class="def">PTX</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.Target.html#PTX" class="link">Source</a> <a href="#t:PTX" class="selflink">#</a></p><div class="doc"><p>The PTX execution target for NVIDIA GPUs.</p><p>The execution target carries state specific for the current execution
 context. The data here --- device memory and execution streams --- are
 implicitly tied to this CUDA execution context.</p><p>Don't store anything here that is independent of the context, for example
 state related to [persistent] kernel caching should _not_ go here.</p></div><div class="subs instances"><p id="control.i:PTX" class="caption collapser" onclick="toggleSection('i:PTX')">Instances</p><div id="section.i:PTX" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:Target:1" class="instance expander" onclick="toggleSection('i:id:PTX:Target:1')"></span> Target <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span> <a href="src/Data.Array.Accelerate.LLVM.PTX.Target.html#line-75" class="link">Source</a> <a href="#t:PTX" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:Target:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:targetTriple">targetTriple</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a></p><p class="src"><a href="#v:targetDataLayout">targetDataLayout</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> DataLayout</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:ExecutableR:2" class="instance expander" onclick="toggleSection('i:id:PTX:ExecutableR:2')"></span> <span class="keyword">data</span> ExecutableR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:ExecutableR:2" class="inst-details hide"><div class="src"><span class="keyword">data</span> ExecutableR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a id="v:PTXR" class="def">PTXR</a> {<ul class="inst"><li class="inst"><a id="v:ptxExecutable" class="def">ptxExecutable</a> :: !(Lifetime FunctionTable)</li></ul>}</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:ObjectR:3" class="instance expander" onclick="toggleSection('i:id:PTX:ObjectR:3')"></span> <span class="keyword">data</span> ObjectR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:ObjectR:3" class="inst-details hide"><div class="src"><span class="keyword">data</span> ObjectR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a id="v:ObjectR" class="def">ObjectR</a> {<ul class="inst"><li class="inst"><a id="v:objId" class="def">objId</a> :: !UID</li><li class="inst"><a id="v:ptxConfig" class="def">ptxConfig</a> :: ![(<a href="../bytestring-0.10.8.2/Data-ByteString-Short.html#t:ShortByteString">ShortByteString</a>, LaunchConfig)]</li><li class="inst"><a id="v:objData" class="def">objData</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:ArgR:4" class="instance expander" onclick="toggleSection('i:id:PTX:ArgR:4')"></span> <span class="keyword">type</span> ArgR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:ArgR:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> ArgR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Exec.html#t:FunParam">FunParam</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:EventR:5" class="instance expander" onclick="toggleSection('i:id:PTX:EventR:5')"></span> <span class="keyword">type</span> EventR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:EventR:5" class="inst-details hide"><div class="src"><span class="keyword">type</span> EventR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a href="Data-Array-Accelerate-LLVM-PTX-Foreign.html#t:Event">Event</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:StreamR:6" class="instance expander" onclick="toggleSection('i:id:PTX:StreamR:6')"></span> <span class="keyword">type</span> StreamR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:StreamR:6" class="inst-details hide"><div class="src"><span class="keyword">type</span> StreamR <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a href="Data-Array-Accelerate-LLVM-PTX-Foreign.html#t:Stream">Stream</a></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:KernelMetadata:7" class="instance expander" onclick="toggleSection('i:id:PTX:KernelMetadata:7')"></span> <span class="keyword">data</span> KernelMetadata <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:KernelMetadata:7" class="inst-details hide"><div class="src"><span class="keyword">data</span> KernelMetadata <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> = <a id="v:KM_PTX" class="def">KM_PTX</a> LaunchConfig</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PTX:RemotePtr:8" class="instance expander" onclick="toggleSection('i:id:PTX:RemotePtr:8')"></span> <span class="keyword">type</span> RemotePtr (<a href="Data-Array-Accelerate-LLVM-PTX-Foreign.html#t:LLVM">LLVM</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a>)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PTX:RemotePtr:8" class="inst-details hide"><div class="src"><span class="keyword">type</span> RemotePtr (<a href="Data-Array-Accelerate-LLVM-PTX-Foreign.html#t:LLVM">LLVM</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a>) = <a href="../cuda-0.8.0.0/Foreign-CUDA-Types.html#t:DevicePtr">DevicePtr</a></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:createTargetForDevice" class="def">createTargetForDevice</a> :: <a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Device.html#t:Device">Device</a> -&gt; <a href="../cuda-0.8.0.0/Foreign-CUDA-Analysis-Device.html#t:DeviceProperties">DeviceProperties</a> -&gt; [<a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Context-Base.html#t:ContextFlag">ContextFlag</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.State.html#createTargetForDevice" class="link">Source</a> <a href="#v:createTargetForDevice" class="selflink">#</a></p><div class="doc"><p>Create a new PTX execution target for the given device</p></div></div><div class="top"><p class="src"><a id="v:createTargetFromContext" class="def">createTargetFromContext</a> :: <a href="../cuda-0.8.0.0/Foreign-CUDA-Driver-Context-Base.html#t:Context">Context</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> <a href="src/Data.Array.Accelerate.LLVM.PTX.State.html#createTargetFromContext" class="link">Source</a> <a href="#v:createTargetFromContext" class="selflink">#</a></p><div class="doc"><p>Create a PTX execute target for the given device context</p></div></div><h1 id="g:5">Controlling host-side allocation</h1><div class="top"><p class="src"><a id="v:registerPinnedAllocator" class="def">registerPinnedAllocator</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Data.Array.Accelerate.LLVM.PTX.html#registerPinnedAllocator" class="link">Source</a> <a href="#v:registerPinnedAllocator" class="selflink">#</a></p><div class="doc"><p>Configure the default execution target to allocate all future host-side
 arrays using (CUDA) pinned memory. Any newly allocated arrays will be
 page-locked and directly accessible from the device, enabling high-speed
 (asynchronous) DMA.</p><p>Note that since the amount of available pageable memory will be reduced,
 overall system performance can suffer.</p></div></div><div class="top"><p class="src"><a id="v:registerPinnedAllocatorWith" class="def">registerPinnedAllocatorWith</a> :: <a href="Data-Array-Accelerate-LLVM-PTX.html#t:PTX">PTX</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Data.Array.Accelerate.LLVM.PTX.html#registerPinnedAllocatorWith" class="link">Source</a> <a href="#v:registerPinnedAllocatorWith" class="selflink">#</a></p><div class="doc"><p>As with <code><a href="Data-Array-Accelerate-LLVM-PTX.html#v:registerPinnedAllocator">registerPinnedAllocator</a></code>, but configure the given execution
 context.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>