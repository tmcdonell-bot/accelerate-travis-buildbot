<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Foreign.CUDA.Ptr</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Foreign-CUDA-Ptr.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Foreign-CUDA-Ptr.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cuda-0.7.1.0: FFI binding to the CUDA interface for programming NVIDIA GPUs</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>[2009..2014] Trevor L. McDonell</td></tr><tr><th>License</th><td>BSD</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Foreign.CUDA.Ptr</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Device pointers</a></li><li><a href="#g:2">Host pointers</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Data pointers on the host and device. These can be shared freely between the
 CUDA runtime and Driver APIs.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:DevicePtr">DevicePtr</a> a = <a href="#v:DevicePtr">DevicePtr</a> {<ul class="subs"><li><a href="#v:useDevicePtr">useDevicePtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a</li></ul>}</li><li class="src short"><a href="#v:withDevicePtr">withDevicePtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; (<a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b</li><li class="src short"><a href="#v:devPtrToWordPtr">devPtrToWordPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Foreign-Ptr.html#t:WordPtr">WordPtr</a></li><li class="src short"><a href="#v:wordPtrToDevPtr">wordPtrToDevPtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:WordPtr">WordPtr</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a</li><li class="src short"><a href="#v:nullDevPtr">nullDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a</li><li class="src short"><a href="#v:castDevPtr">castDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> b</li><li class="src short"><a href="#v:plusDevPtr">plusDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a</li><li class="src short"><a href="#v:alignDevPtr">alignDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a</li><li class="src short"><a href="#v:minusDevPtr">minusDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:advanceDevPtr">advanceDevPtr</a> :: <a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:HostPtr">HostPtr</a> a = <a href="#v:HostPtr">HostPtr</a> {<ul class="subs"><li><a href="#v:useHostPtr">useHostPtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a</li></ul>}</li><li class="src short"><a href="#v:withHostPtr">withHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; (<a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b</li><li class="src short"><a href="#v:nullHostPtr">nullHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a</li><li class="src short"><a href="#v:castHostPtr">castHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> b</li><li class="src short"><a href="#v:plusHostPtr">plusHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a</li><li class="src short"><a href="#v:alignHostPtr">alignHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a</li><li class="src short"><a href="#v:minusHostPtr">minusHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></li><li class="src short"><a href="#v:advanceHostPtr">advanceHostPtr</a> :: <a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a</li></ul></div><div id="interface"><h1 id="g:1">Device pointers</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:DevicePtr" class="def">DevicePtr</a> a <a href="src/Foreign-CUDA-Types.html#DevicePtr" class="link">Source</a></p><div class="doc"><p>A reference to data stored on the device.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DevicePtr" class="def">DevicePtr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:useDevicePtr" class="def">useDevicePtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:DevicePtr" class="caption collapser" onclick="toggleSection('i:DevicePtr')">Instances</p><div id="section.i:DevicePtr" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-48" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-48" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (<a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-50" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> (<a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-53" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:withDevicePtr" class="def">withDevicePtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; (<a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b <a href="src/Foreign-CUDA-Ptr.html#withDevicePtr" class="link">Source</a></p><div class="doc"><p>Look at the contents of device memory. This takes an IO action that will be
 applied to that pointer, the result of which is returned. It would be silly
 to return the pointer from the action.</p></div></div><div class="top"><p class="src"><a name="v:devPtrToWordPtr" class="def">devPtrToWordPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Foreign-Ptr.html#t:WordPtr">WordPtr</a> <a href="src/Foreign-CUDA-Ptr.html#devPtrToWordPtr" class="link">Source</a></p><div class="doc"><p>Return a unique handle associated with the given device pointer</p></div></div><div class="top"><p class="src"><a name="v:wordPtrToDevPtr" class="def">wordPtrToDevPtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:WordPtr">WordPtr</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a <a href="src/Foreign-CUDA-Ptr.html#wordPtrToDevPtr" class="link">Source</a></p><div class="doc"><p>Return a device pointer from the given handle</p></div></div><div class="top"><p class="src"><a name="v:nullDevPtr" class="def">nullDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a <a href="src/Foreign-CUDA-Ptr.html#nullDevPtr" class="link">Source</a></p><div class="doc"><p>The constant <code><a href="Foreign-CUDA-Ptr.html#v:nullDevPtr">nullDevPtr</a></code> contains the distinguished memory location that is
 not associated with a valid memory location</p></div></div><div class="top"><p class="src"><a name="v:castDevPtr" class="def">castDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> b <a href="src/Foreign-CUDA-Ptr.html#castDevPtr" class="link">Source</a></p><div class="doc"><p>Cast a device pointer from one type to another</p></div></div><div class="top"><p class="src"><a name="v:plusDevPtr" class="def">plusDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a <a href="src/Foreign-CUDA-Ptr.html#plusDevPtr" class="link">Source</a></p><div class="doc"><p>Advance the pointer address by the given offset in bytes.</p></div></div><div class="top"><p class="src"><a name="v:alignDevPtr" class="def">alignDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a <a href="src/Foreign-CUDA-Ptr.html#alignDevPtr" class="link">Source</a></p><div class="doc"><p>Given an alignment constraint, align the device pointer to the next highest
 address satisfying the constraint</p></div></div><div class="top"><p class="src"><a name="v:minusDevPtr" class="def">minusDevPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Foreign-CUDA-Ptr.html#minusDevPtr" class="link">Source</a></p><div class="doc"><p>Compute the difference between the second and first argument. This fulfils
 the relation</p><pre>p2 == p1 `plusDevPtr` (p2 `minusDevPtr` p1)</pre></div></div><div class="top"><p class="src"><a name="v:advanceDevPtr" class="def">advanceDevPtr</a> :: <a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:DevicePtr">DevicePtr</a> a <a href="src/Foreign-CUDA-Ptr.html#advanceDevPtr" class="link">Source</a></p><div class="doc"><p>Advance a pointer into a device array by the given number of elements</p></div></div><h1 id="g:2">Host pointers</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:HostPtr" class="def">HostPtr</a> a <a href="src/Foreign-CUDA-Types.html#HostPtr" class="link">Source</a></p><div class="doc"><p>A reference to page-locked host memory.</p><p>A <code><a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a></code> is just a plain <code><a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a></code>, but the memory has been allocated by CUDA
 into page locked memory. This means that the data can be copied to the GPU
 via DMA (direct memory access). Note that the use of the system function
 <code>mlock</code> is not sufficient here --- the CUDA version ensures that the
 <em>physical</em> address stays this same, not just the virtual address.</p><p>To copy data into a <code><a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a></code> array, you may use for example <code>withHostPtr</code>
 together with <code><a href="../base-4.8.2.0/Foreign-Marshal-Array.html#v:copyArray">copyArray</a></code> or
 <code><a href="../base-4.8.2.0/Foreign-Marshal-Array.html#v:moveArray">moveArray</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:HostPtr" class="def">HostPtr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:useHostPtr" class="def">useHostPtr</a> :: <a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:HostPtr" class="caption collapser" onclick="toggleSection('i:HostPtr')">Instances</p><div id="section.i:HostPtr" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> (<a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-74" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> (<a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-74" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> (<a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-76" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> (<a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a)</span> <a href="src/Foreign-CUDA-Types.html#line-79" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:withHostPtr" class="def">withHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; (<a href="../base-4.8.2.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b <a href="src/Foreign-CUDA-Ptr.html#withHostPtr" class="link">Source</a></p><div class="doc"><p>Apply an IO action to the memory reference living inside the host pointer
 object. All uses of the pointer should be inside the <code><a href="Foreign-CUDA-Ptr.html#v:withHostPtr">withHostPtr</a></code> bracket.</p></div></div><div class="top"><p class="src"><a name="v:nullHostPtr" class="def">nullHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a <a href="src/Foreign-CUDA-Ptr.html#nullHostPtr" class="link">Source</a></p><div class="doc"><p>The constant <code><a href="Foreign-CUDA-Ptr.html#v:nullHostPtr">nullHostPtr</a></code> contains the distinguished memory location that is
 not associated with a valid memory location</p></div></div><div class="top"><p class="src"><a name="v:castHostPtr" class="def">castHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> b <a href="src/Foreign-CUDA-Ptr.html#castHostPtr" class="link">Source</a></p><div class="doc"><p>Cast a host pointer from one type to another</p></div></div><div class="top"><p class="src"><a name="v:plusHostPtr" class="def">plusHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a <a href="src/Foreign-CUDA-Ptr.html#plusHostPtr" class="link">Source</a></p><div class="doc"><p>Advance the pointer address by the given offset in bytes</p></div></div><div class="top"><p class="src"><a name="v:alignHostPtr" class="def">alignHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a <a href="src/Foreign-CUDA-Ptr.html#alignHostPtr" class="link">Source</a></p><div class="doc"><p>Given an alignment constraint, align the host pointer to the next highest
 address satisfying the constraint</p></div></div><div class="top"><p class="src"><a name="v:minusHostPtr" class="def">minusHostPtr</a> :: <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> <a href="src/Foreign-CUDA-Ptr.html#minusHostPtr" class="link">Source</a></p><div class="doc"><p>Compute the difference between the second and first argument</p></div></div><div class="top"><p class="src"><a name="v:advanceHostPtr" class="def">advanceHostPtr</a> :: <a href="../base-4.8.2.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Ptr.html#t:HostPtr">HostPtr</a> a <a href="src/Foreign-CUDA-Ptr.html#advanceHostPtr" class="link">Source</a></p><div class="doc"><p>Advance a pointer into a host array by a given number of elements</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>