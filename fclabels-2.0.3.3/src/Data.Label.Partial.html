<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| Monomorphic lenses where the getters and updates can potentially silently
fail. Partial lenses are useful for creating accessor labels for multi
constructor data types where projection and modification of fields will not
always succeed.
-}</span><span>
</span><a name="line-6"></a><span>
</span><a name="line-7"></a><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><a name="line-8"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Label.Partial</span><span>
</span><a name="line-9"></a><span class="hs-special">(</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Partial.html#%3A~%3E"><span class="hs-operator hs-type">:~&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-10"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Point.html#Partial"><span class="hs-identifier hs-type">Partial</span></a><span>
</span><a name="line-11"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#lens"><span class="hs-identifier hs-var">lens</span></a><span>
</span><a name="line-12"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#get"><span class="hs-identifier hs-var">get</span></a><span>
</span><a name="line-13"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#modify"><span class="hs-identifier hs-var">modify</span></a><span>
</span><a name="line-14"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#set"><span class="hs-identifier hs-var">set</span></a><span>
</span><a name="line-15"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#embed"><span class="hs-identifier hs-var">embed</span></a><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-comment">-- * Seemingly total modifications.</span><span>
</span><a name="line-18"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#set%27"><span class="hs-identifier hs-var">set'</span></a><span>
</span><a name="line-19"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#modify%27"><span class="hs-identifier hs-var">modify'</span></a><span>
</span><a name="line-20"></a><span>
</span><a name="line-21"></a><span class="hs-comment">-- * Potentially removing modification.</span><span>
</span><a name="line-22"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Partial.html#update"><span class="hs-identifier hs-var">update</span></a><span>
</span><a name="line-23"></a><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span class="hs-keyword">where</span><span>
</span><a name="line-25"></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Arrow</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Category</span><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Label.Point.html"><span class="hs-identifier">Data.Label.Point</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Point.html#Partial"><span class="hs-identifier hs-type">Partial</span></a><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Label.Poly.html"><span class="hs-identifier">Data.Label.Poly</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span class="hs-special">)</span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Maybe</span><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">id</span><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Data.Label.Poly.html"><span class="hs-identifier">Data.Label.Poly</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Poly</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">lens</span><span>    </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-37"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">get</span><span>     </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-38"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">modify</span><span>  </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-39"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">set</span><span>     </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-40"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">embed</span><span>   </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-41"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">set'</span><span>    </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-42"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">modify'</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-comment">-- | Partial lens type for situations in which the accessor functions can fail.</span><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span class="hs-keyword">type</span><span> </span><a name="local-6989586621679035099"><a href="#local-6989586621679035099"><span class="hs-identifier">f</span></a></a><span> </span><a name="%3A~%3E"><a href="Data.Label.Partial.html#%3A~%3E"><span class="hs-operator">:~&gt;</span></a></a><span> </span><a name="local-6989586621679035100"><a href="#local-6989586621679035100"><span class="hs-identifier">o</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Poly.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="Data.Label.Point.html#Partial"><span class="hs-identifier hs-type">Partial</span></a><span> </span><a href="#local-6989586621679035099"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679035100"><span class="hs-identifier hs-type">o</span></a><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-49"></a><span>
</span><a name="line-50"></a><span class="hs-comment">-- | Create a lens that can fail from a getter and a modifier that can</span><span>
</span><a name="line-51"></a><span class="hs-comment">-- themselves potentially fail.</span><span>
</span><a name="line-52"></a><span>
</span><a name="line-53"></a><span class="hs-identifier">lens</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035125"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035126"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span>                    </span><span class="hs-comment">-- ^ Getter.</span><span>
</span><a name="line-54"></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="#local-6989586621679035126"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035127"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035125"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035128"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ Modifier.</span><span>
</span><a name="line-55"></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035125"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035128"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035126"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035127"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-56"></a><a name="lens"><a href="Data.Label.Partial.html#lens"><span class="hs-identifier">lens</span></a></a><span> </span><a name="local-6989586621679035129"><a href="#local-6989586621679035129"><span class="hs-identifier">g</span></a></a><span> </span><a name="local-6989586621679035130"><a href="#local-6989586621679035130"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Poly.html#lens"><span class="hs-identifier hs-var">Poly.lens</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Kleisli</span><span> </span><a href="#local-6989586621679035129"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Kleisli</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><a name="local-6989586621679035131"><a href="#local-6989586621679035131"><span class="hs-identifier">m</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679035132"><a href="#local-6989586621679035132"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035130"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">runKleisli</span><span> </span><a href="#local-6989586621679035131"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679035132"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span class="hs-comment">-- | Getter for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-59"></a><span class="hs-comment">-- is not accessible the getter returns 'Nothing'.</span><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span class="hs-identifier">get</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035121"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035122"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035123"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035124"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035121"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035123"><span class="hs-identifier hs-type">o</span></a><span>
</span><a name="line-62"></a><a name="get"><a href="Data.Label.Partial.html#get"><span class="hs-identifier">get</span></a></a><span> </span><a name="local-6989586621679035133"><a href="#local-6989586621679035133"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679035133"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-comment">-- | Modifier for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-65"></a><span class="hs-comment">-- is not accessible this function returns 'Nothing'.</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-identifier">modify</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035117"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035118"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035119"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035120"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035119"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035120"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035117"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035118"><span class="hs-identifier hs-type">g</span></a><span>
</span><a name="line-68"></a><a name="modify"><a href="Data.Label.Partial.html#modify"><span class="hs-identifier">modify</span></a></a><span> </span><a name="local-6989586621679035134"><a href="#local-6989586621679035134"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679035135"><a href="#local-6989586621679035135"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#modify"><span class="hs-identifier hs-var">Poly.modify</span></a><span> </span><a href="#local-6989586621679035134"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">arr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">arr</span><span> </span><a href="#local-6989586621679035135"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span class="hs-comment">-- | Setter for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-71"></a><span class="hs-comment">-- is not accessible this function returns 'Nothing'.</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-identifier">set</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035113"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035114"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035115"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035116"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035116"><span class="hs-identifier hs-type">i</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035113"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035114"><span class="hs-identifier hs-type">g</span></a><span>
</span><a name="line-74"></a><a name="set"><a href="Data.Label.Partial.html#set"><span class="hs-identifier">set</span></a></a><span> </span><a name="local-6989586621679035136"><a href="#local-6989586621679035136"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679035137"><a href="#local-6989586621679035137"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#set"><span class="hs-identifier hs-var">Poly.set</span></a><span> </span><a href="#local-6989586621679035136"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">arr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679035137"><span class="hs-identifier hs-var">v</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span class="hs-comment">-- | Embed a total lens that points to a `Maybe` field into a lens that might</span><span>
</span><a name="line-77"></a><span class="hs-comment">-- fail.</span><span>
</span><a name="line-78"></a><span>
</span><a name="line-79"></a><span class="hs-identifier">embed</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Poly.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035109"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035110"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035111"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035112"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035109"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035110"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035111"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035112"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-80"></a><a name="embed"><a href="Data.Label.Partial.html#embed"><span class="hs-identifier">embed</span></a></a><span> </span><a name="local-6989586621679035138"><a href="#local-6989586621679035138"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Partial.html#lens"><span class="hs-identifier hs-var">lens</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679035138"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679035139"><a href="#local-6989586621679035139"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679035140"><a href="#local-6989586621679035140"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#modify"><span class="hs-identifier hs-var">Poly.modify</span></a><span> </span><a href="#local-6989586621679035138"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><a href="#local-6989586621679035139"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679035138"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span class="hs-comment">-- | Like 'modify' but return behaves like the identity function when the field</span><span>
</span><a name="line-85"></a><span class="hs-comment">-- could not be set.</span><span>
</span><a name="line-86"></a><span>
</span><a name="line-87"></a><span class="hs-identifier">modify'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035107"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035107"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035108"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035108"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035108"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035108"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035107"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035107"><span class="hs-identifier hs-type">f</span></a><span>
</span><a name="line-88"></a><a name="modify%27"><a href="Data.Label.Partial.html#modify%27"><span class="hs-identifier">modify'</span></a></a><span> </span><a name="local-6989586621679035141"><a href="#local-6989586621679035141"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679035142"><a href="#local-6989586621679035142"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679035143"><a href="#local-6989586621679035143"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035143"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">fromMaybe</span><span class="hs-special">`</span><span> </span><a href="Data.Label.Partial.html#modify"><span class="hs-identifier hs-var">modify</span></a><span> </span><a href="#local-6989586621679035141"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679035142"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="#local-6989586621679035143"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-89"></a><span>
</span><a name="line-90"></a><span class="hs-comment">-- | Like 'set' but return behaves like the identity function when the field</span><span>
</span><a name="line-91"></a><span class="hs-comment">-- could not be set.</span><span>
</span><a name="line-92"></a><span>
</span><a name="line-93"></a><span class="hs-identifier">set'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035105"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035105"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035106"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035106"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035106"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035105"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035105"><span class="hs-identifier hs-type">f</span></a><span>
</span><a name="line-94"></a><a name="set%27"><a href="Data.Label.Partial.html#set%27"><span class="hs-identifier">set'</span></a></a><span> </span><a name="local-6989586621679035144"><a href="#local-6989586621679035144"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679035145"><a href="#local-6989586621679035145"><span class="hs-identifier">v</span></a></a><span> </span><a name="local-6989586621679035146"><a href="#local-6989586621679035146"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035146"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">fromMaybe</span><span class="hs-special">`</span><span> </span><a href="Data.Label.Partial.html#set"><span class="hs-identifier hs-var">set</span></a><span> </span><a href="#local-6989586621679035144"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679035145"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="#local-6989586621679035146"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-95"></a><span>
</span><a name="line-96"></a><span class="hs-comment">-- | Like `modify`, but update allows, depending on the underlying lens, to</span><span>
</span><a name="line-97"></a><span class="hs-comment">-- remove items by modifying to `Nothing`.</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-identifier">update</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035101"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035102"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator">:~&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035103"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035104"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035103"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035104"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679035101"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><a href="#local-6989586621679035102"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-100"></a><a name="update"><a href="Data.Label.Partial.html#update"><span class="hs-identifier">update</span></a></a><span> </span><a name="local-6989586621679035147"><a href="#local-6989586621679035147"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679035148"><a href="#local-6989586621679035148"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#modify"><span class="hs-identifier hs-var">Poly.modify</span></a><span> </span><a href="#local-6989586621679035147"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">arr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Kleisli</span><span> </span><a href="#local-6989586621679035148"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-101"></a><span>
</span><a name="line-102"></a></pre></body></html>