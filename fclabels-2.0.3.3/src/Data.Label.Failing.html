<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-| Lenses for getters and updates that can potentially fail with some error
value. Like partial lenses, failing lenses are useful for creating accessor
labels for multi constructor data types where projection and modification of
fields will not always succeed. The error value can be used to report what
caused the failure.
-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-pragma">{-# LANGUAGE TypeOperators, TupleSections #-}</span><span>
</span><a name="line-9"></a><span>
</span><a name="line-10"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Label.Failing</span><span>
</span><a name="line-11"></a><span class="hs-special">(</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span>
</span><a name="line-12"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Point.html#Failing"><span class="hs-identifier hs-type">Failing</span></a><span>
</span><a name="line-13"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#lens"><span class="hs-identifier hs-var">lens</span></a><span>
</span><a name="line-14"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#get"><span class="hs-identifier hs-var">get</span></a><span>
</span><a name="line-15"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#modify"><span class="hs-identifier hs-var">modify</span></a><span>
</span><a name="line-16"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#set"><span class="hs-identifier hs-var">set</span></a><span>
</span><a name="line-17"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#embed"><span class="hs-identifier hs-var">embed</span></a><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-comment">-- * Seemingly total modifications.</span><span>
</span><a name="line-20"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#set%27"><span class="hs-identifier hs-var">set'</span></a><span>
</span><a name="line-21"></a><span class="hs-special">,</span><span> </span><a href="Data.Label.Failing.html#modify%27"><span class="hs-identifier hs-var">modify'</span></a><span>
</span><a name="line-22"></a><span class="hs-special">)</span><span>
</span><a name="line-23"></a><span class="hs-keyword">where</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Arrow</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Category</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Data.Label.Point.html"><span class="hs-identifier">Data.Label.Point</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Point.html#Failing"><span class="hs-identifier hs-type">Failing</span></a><span class="hs-special">)</span><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">id</span><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Data.Label.Poly.html"><span class="hs-identifier">Data.Label.Poly</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Poly</span><span>
</span><a name="line-32"></a><span>
</span><a name="line-33"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">lens</span><span>    </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-34"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">get</span><span>     </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-35"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">modify</span><span>  </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-36"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">set</span><span>     </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-37"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">embed</span><span>   </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-38"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">set'</span><span>    </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-39"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">modify'</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span class="hs-comment">-- | Lens type for situations in which the accessor functions can fail with</span><span>
</span><a name="line-42"></a><span class="hs-comment">-- some error information.</span><span>
</span><a name="line-43"></a><span>
</span><a name="line-44"></a><span class="hs-keyword">type</span><span> </span><a name="Lens"><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier">Lens</span></a></a><span> </span><a name="local-6989586621679037783"><a href="#local-6989586621679037783"><span class="hs-identifier">e</span></a></a><span> </span><a name="local-6989586621679037784"><a href="#local-6989586621679037784"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679037785"><a href="#local-6989586621679037785"><span class="hs-identifier">o</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Poly.html#Lens"><span class="hs-identifier hs-type">Poly.Lens</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Point.html#Failing"><span class="hs-identifier hs-type">Failing</span></a><span> </span><a href="#local-6989586621679037783"><span class="hs-identifier hs-type">e</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679037784"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679037785"><span class="hs-identifier hs-type">o</span></a><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-47"></a><span>
</span><a name="line-48"></a><span class="hs-comment">-- | Create a lens that can fail from a getter and a modifier that can</span><span>
</span><a name="line-49"></a><span class="hs-comment">-- themselves potentially fail.</span><span>
</span><a name="line-50"></a><span>
</span><a name="line-51"></a><span class="hs-identifier">lens</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037812"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037813"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037814"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span>                       </span><span class="hs-comment">-- ^ Getter.</span><span>
</span><a name="line-52"></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><a href="#local-6989586621679037814"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037813"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037815"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037812"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037813"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037816"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ Modifier.</span><span>
</span><a name="line-53"></a><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037813"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037812"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037816"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037814"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037815"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-54"></a><a name="lens"><a href="Data.Label.Failing.html#lens"><span class="hs-identifier">lens</span></a></a><span> </span><a name="local-6989586621679037817"><a href="#local-6989586621679037817"><span class="hs-identifier">g</span></a></a><span> </span><a name="local-6989586621679037818"><a href="#local-6989586621679037818"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Poly.html#lens"><span class="hs-identifier hs-var">Poly.lens</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Kleisli</span><span> </span><a href="#local-6989586621679037817"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Kleisli</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><a name="local-6989586621679037819"><a href="#local-6989586621679037819"><span class="hs-identifier">m</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679037820"><a href="#local-6989586621679037820"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037818"><span class="hs-identifier hs-var">s</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">runKleisli</span><span> </span><a href="#local-6989586621679037819"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679037820"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-55"></a><span>
</span><a name="line-56"></a><span class="hs-comment">-- | Getter for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-57"></a><span class="hs-comment">-- is not accessible the getter returns 'Nothing'.</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-identifier">get</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037807"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037808"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037809"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037810"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037811"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037808"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037807"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037810"><span class="hs-identifier hs-type">o</span></a><span>
</span><a name="line-60"></a><a name="get"><a href="Data.Label.Failing.html#get"><span class="hs-identifier">get</span></a></a><span> </span><a name="local-6989586621679037821"><a href="#local-6989586621679037821"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679037821"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span>
</span><a name="line-62"></a><span class="hs-comment">-- | Modifier for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-63"></a><span class="hs-comment">-- is not accessible this function returns 'Left'.</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span class="hs-identifier">modify</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037802"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037803"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037804"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037805"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037806"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037805"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037806"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037803"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037802"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037804"><span class="hs-identifier hs-type">g</span></a><span>
</span><a name="line-66"></a><a name="modify"><a href="Data.Label.Failing.html#modify"><span class="hs-identifier">modify</span></a></a><span> </span><a name="local-6989586621679037822"><a href="#local-6989586621679037822"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679037823"><a href="#local-6989586621679037823"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#modify"><span class="hs-identifier hs-var">Poly.modify</span></a><span> </span><a href="#local-6989586621679037822"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">arr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">arr</span><span> </span><a href="#local-6989586621679037823"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-67"></a><span>
</span><a name="line-68"></a><span class="hs-comment">-- | Setter for a lens that can fail. When the field to which the lens points</span><span>
</span><a name="line-69"></a><span class="hs-comment">-- is not accessible this function returns 'Left'.</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-identifier">set</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037797"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037798"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037799"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037800"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037801"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037801"><span class="hs-identifier hs-type">i</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037798"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037797"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037799"><span class="hs-identifier hs-type">g</span></a><span>
</span><a name="line-72"></a><a name="set"><a href="Data.Label.Failing.html#set"><span class="hs-identifier">set</span></a></a><span> </span><a name="local-6989586621679037824"><a href="#local-6989586621679037824"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679037825"><a href="#local-6989586621679037825"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runKleisli</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#set"><span class="hs-identifier hs-var">Poly.set</span></a><span> </span><a href="#local-6989586621679037824"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">arr</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037825"><span class="hs-identifier hs-var">v</span></a><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-73"></a><span>
</span><a name="line-74"></a><span class="hs-comment">-- | Embed a total lens that points to an `Either` field into a lens that might</span><span>
</span><a name="line-75"></a><span class="hs-comment">-- fail.</span><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span class="hs-identifier">embed</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Poly.html#Lens"><span class="hs-identifier hs-type">Poly.Lens</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037792"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037793"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037794"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037795"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Either</span><span> </span><a href="#local-6989586621679037794"><span class="hs-identifier hs-type">e</span></a><span> </span><a href="#local-6989586621679037796"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037794"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037792"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037793"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037795"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037796"><span class="hs-identifier hs-type">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-78"></a><a name="embed"><a href="Data.Label.Failing.html#embed"><span class="hs-identifier">embed</span></a></a><span> </span><a name="local-6989586621679037826"><a href="#local-6989586621679037826"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Label.Failing.html#lens"><span class="hs-identifier hs-var">lens</span></a><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679037826"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679037827"><a href="#local-6989586621679037827"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679037828"><a href="#local-6989586621679037828"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Poly.html#modify"><span class="hs-identifier hs-var">Poly.modify</span></a><span> </span><a href="#local-6989586621679037826"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">&gt;&gt;=</span><span> </span><a href="#local-6989586621679037827"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679037828"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Data.Label.Poly.html#get"><span class="hs-identifier hs-var">Poly.get</span></a><span> </span><a href="#local-6989586621679037826"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679037828"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-79"></a><span>
</span><a name="line-80"></a><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><a name="line-81"></a><span>
</span><a name="line-82"></a><span class="hs-comment">-- | Like 'modify' but return behaves like the identity function when the field</span><span>
</span><a name="line-83"></a><span class="hs-comment">-- could not be set.</span><span>
</span><a name="line-84"></a><span>
</span><a name="line-85"></a><span class="hs-identifier">modify'</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037789"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037790"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037790"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037791"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037791"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037791"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037791"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037790"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037790"><span class="hs-identifier hs-type">f</span></a><span>
</span><a name="line-86"></a><a name="modify%27"><a href="Data.Label.Failing.html#modify%27"><span class="hs-identifier">modify'</span></a></a><span> </span><a name="local-6989586621679037829"><a href="#local-6989586621679037829"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679037830"><a href="#local-6989586621679037830"><span class="hs-identifier">m</span></a></a><span> </span><a name="local-6989586621679037831"><a href="#local-6989586621679037831"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">const</span><span> </span><a href="#local-6989586621679037831"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Failing.html#modify"><span class="hs-identifier hs-var">modify</span></a><span> </span><a href="#local-6989586621679037829"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679037830"><span class="hs-identifier hs-var">m</span></a><span> </span><a href="#local-6989586621679037831"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-87"></a><span>
</span><a name="line-88"></a><span class="hs-comment">-- | Like 'set' but return behaves like the identity function when the field</span><span>
</span><a name="line-89"></a><span class="hs-comment">-- could not be set.</span><span>
</span><a name="line-90"></a><span>
</span><a name="line-91"></a><span class="hs-identifier">set'</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Label.Failing.html#Lens"><span class="hs-identifier hs-type">Lens</span></a><span> </span><a href="#local-6989586621679037786"><span class="hs-identifier hs-type">e</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037787"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037787"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679037788"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037788"><span class="hs-identifier hs-type">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037788"><span class="hs-identifier hs-type">o</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037787"><span class="hs-identifier hs-type">f</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679037787"><span class="hs-identifier hs-type">f</span></a><span>
</span><a name="line-92"></a><a name="set%27"><a href="Data.Label.Failing.html#set%27"><span class="hs-identifier">set'</span></a></a><span> </span><a name="local-6989586621679037832"><a href="#local-6989586621679037832"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679037833"><a href="#local-6989586621679037833"><span class="hs-identifier">v</span></a></a><span> </span><a name="local-6989586621679037834"><a href="#local-6989586621679037834"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">either</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">const</span><span> </span><a href="#local-6989586621679037834"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-special">(</span><a href="Data.Label.Failing.html#set"><span class="hs-identifier hs-var">set</span></a><span> </span><a href="#local-6989586621679037832"><span class="hs-identifier hs-var">l</span></a><span> </span><a href="#local-6989586621679037833"><span class="hs-identifier hs-var">v</span></a><span> </span><a href="#local-6989586621679037834"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a></pre></body></html>