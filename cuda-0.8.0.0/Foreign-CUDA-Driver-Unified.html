<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Foreign.CUDA.Driver.Unified</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Foreign-CUDA-Driver-Unified.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Foreign.CUDA.Driver.Unified.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cuda-0.8.0.0: FFI binding to the CUDA interface for programming NVIDIA GPUs</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>[2017] Trevor L. McDonell</td></tr><tr><th>License</th><td>BSD</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Foreign.CUDA.Driver.Unified</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Querying pointer attributes</a></li><li><a href="#g:2">Setting pointer attributes</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Unified addressing functions for the low-level driver interface</p><dl><dt><em>Overview</em></dt><dd></dd></dl><p>CUDA devices can share a unified address space with the host. For these
 devices, there is no distinction between a device pointer and a host
 pointer---the same pointer value may be used to access memory from the host
 program and from a kernel running on the device (with exceptions enumerated
 below).</p><dl><dt><em>Support</em></dt><dd></dd></dl><p>Whether or not a device supports unified addressing may be queried by calling
 <code><a href="Foreign-CUDA-Driver-Device.html#v:attribute">attribute</a></code> with the
 <code><a href="Foreign-CUDA-Driver-Device.html#v:UnifiedAddressing">UnifiedAddressing</a></code> attribute.</p><p>Unified addressing is automatically enabled in 64-bit processes on devices
 with compute capability at leas 2.0.</p><dl><dt><em>Looking up information about pointers</em></dt><dd></dd></dl><p>It is possible to look up information about the memory which backs a pointer;
 that is, whether the memory resides on the host or the device (and in
 particular, which device).</p><dl><dt><em>Automatic mapping of host memory</em></dt><dd></dd></dl><p>All host memory allocated in all contexts using
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:mallocHostArray">mallocHostArray</a></code> or
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:mallocHostForeignPtr">mallocHostForeignPtr</a></code> is always directly
 accessible from all contexts on all devices which support unified addressing.
 This is the case whether or not the flags
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:Portable">Portable</a></code> or
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:DeviceMapped">DeviceMapped</a></code> are specified.</p><p>The pointer value through which allocated host memory may be accessed in
 kernels on all devices which support unified addressing is the same as the
 pointer value as on the host; that is, it is not necessary to call
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:getDevicePtr">getDevicePtr</a></code> for these allocations.</p><p>Note that this is not the case for memory allocated using the
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:WriteCombined">WriteCombined</a></code> option; see below.</p><dl><dt><em>Automatic registration of peer memory</em></dt><dd></dd></dl><p>Upon enabling direct access from a context which supports unified addressing
 to another peer context which supports unified addressing using
 <code><a href="Foreign-CUDA-Driver-Context-Peer.html#v:add">add</a></code>, all memory allocated in the peer
 context will immediately be accessible by the current context. The device
 pointer values are the same on both contexts.</p><dl><dt><em>Exceptions (disjoint addressing</em></dt><dd></dd></dl><p>Not all memory may be accessed on devices through the same pointer value
 as they are accessed with on the host. These exceptions are host arrays
 registered with <code><a href="Foreign-CUDA-Driver-Marshal.html#v:registerArray">registerArray</a></code>, and those
 allocated with the flag <code><a href="Foreign-CUDA-Driver-Marshal.html#v:WriteCombined">WriteCombined</a></code>. In these
 cases, the host and device arrays have distinct addresses (pointer values).
 However, the device address is guaranteed to not overlap with any valid host
 pointer range and is guaranteed to have the same value across all contexts
 which support unified addressing.</p><p>The value of the device pointer may be queried with
 <code><a href="Foreign-CUDA-Driver-Marshal.html#v:getDevicePtr">getDevicePtr</a></code> from any context supporting
 unified addressing.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:PointerAttributes">PointerAttributes</a> a = <a href="#v:PointerAttributes">PointerAttributes</a> {<ul class="subs"><li><a href="#v:ptrContext">ptrContext</a> :: !<a href="Foreign-CUDA-Driver-Context-Base.html#t:Context">Context</a></li><li><a href="#v:ptrDevice">ptrDevice</a> :: !(<a href="Foreign-CUDA-Types.html#t:DevicePtr">DevicePtr</a> a)</li><li><a href="#v:ptrHost">ptrHost</a> :: !(<a href="Foreign-CUDA-Types.html#t:HostPtr">HostPtr</a> a)</li><li><a href="#v:ptrBufferID">ptrBufferID</a> :: !<a href="../base-4.9.0.0/Foreign-C-Types.html#t:CULLong">CULLong</a></li><li><a href="#v:ptrMemoryType">ptrMemoryType</a> :: !<a href="Foreign-CUDA-Driver-Unified.html#t:MemoryType">MemoryType</a></li><li><a href="#v:ptrSyncMemops">ptrSyncMemops</a> :: !<a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:ptrIsManaged">ptrIsManaged</a> :: !<a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:advise">advise</a> :: <a href="../base-4.9.0.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="../base-4.9.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Driver-Unified.html#t:Advice">Advice</a> -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Foreign-CUDA-Driver-Device.html#t:Device">Device</a> -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h2 id="g:1">Querying pointer attributes</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PointerAttributes" class="def">PointerAttributes</a> a <a href="src/Foreign.CUDA.Driver.Unified.html#PointerAttributes" class="link">Source</a> <a href="#t:PointerAttributes" class="selflink">#</a></p><div class="doc"><p>Information about a pointer</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PointerAttributes" class="def">PointerAttributes</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ptrContext" class="def">ptrContext</a> :: !<a href="Foreign-CUDA-Driver-Context-Base.html#t:Context">Context</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrDevice" class="def">ptrDevice</a> :: !(<a href="Foreign-CUDA-Types.html#t:DevicePtr">DevicePtr</a> a)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrHost" class="def">ptrHost</a> :: !(<a href="Foreign-CUDA-Types.html#t:HostPtr">HostPtr</a> a)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrBufferID" class="def">ptrBufferID</a> :: !<a href="../base-4.9.0.0/Foreign-C-Types.html#t:CULLong">CULLong</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrMemoryType" class="def">ptrMemoryType</a> :: !<a href="Foreign-CUDA-Driver-Unified.html#t:MemoryType">MemoryType</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrSyncMemops" class="def">ptrSyncMemops</a> :: !<a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ptrIsManaged" class="def">ptrIsManaged</a> :: !<a href="../base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:PointerAttributes" class="caption collapser" onclick="toggleSection('i:PointerAttributes')">Instances</p><div id="section.i:PointerAttributes" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PointerAttributes:Show:1" class="instance expander" onclick="toggleSection('i:id:PointerAttributes:Show:1')"></span> <a href="../base-4.9.0.0/Text-Show.html#t:Show">Show</a> (<a href="Foreign-CUDA-Driver-Unified.html#t:PointerAttributes">PointerAttributes</a> a)</span> <a href="src/Foreign.CUDA.Driver.Unified.html#line-127" class="link">Source</a> <a href="#t:PointerAttributes" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PointerAttributes:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Driver-Unified.html#t:PointerAttributes">PointerAttributes</a> a -&gt; <a href="../base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Foreign-CUDA-Driver-Unified.html#t:PointerAttributes">PointerAttributes</a> a -&gt; <a href="../base-4.9.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Foreign-CUDA-Driver-Unified.html#t:PointerAttributes">PointerAttributes</a> a] -&gt; <a href="../base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h2 id="g:2">Setting pointer attributes</h2><div class="top"><p class="src"><a id="v:advise" class="def">advise</a> :: <a href="../base-4.9.0.0/Foreign-Storable.html#t:Storable">Storable</a> a =&gt; <a href="../base-4.9.0.0/Foreign-Ptr.html#t:Ptr">Ptr</a> a -&gt; <a href="../base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Foreign-CUDA-Driver-Unified.html#t:Advice">Advice</a> -&gt; <a href="../base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Foreign-CUDA-Driver-Device.html#t:Device">Device</a> -&gt; <a href="../base-4.9.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Foreign.CUDA.Driver.Unified.html#advise" class="link">Source</a> <a href="#v:advise" class="selflink">#</a></p><div class="doc"><p>Advise about the usage of a given range of memory. If the supplied device
 is Nothing, then the preferred location is taken to mean the CPU.</p><p><a href="http://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__UNIFIED.html#group__CUDA__UNIFIED_1g27608c857a9254789c13f3e3b72029e2">http://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__UNIFIED.html#group__CUDA__UNIFIED_1g27608c857a9254789c13f3e3b72029e2</a></p><p>Requires CUDA-8.0.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>